var e,t;(t=e||(e={})).BOOLEAN="BOOLEAN",t.CURRENCY="CURRENCY",t.GROUP="GROUP",t.LABEL="LABEL",t.MEASUREMENT="MEASUREMENT",t.OUTPUT="OUTPUT",t.QUANTITY="QUANTITY",t.SELECT_MULTI="SELECT_MULTI",t.SELECT_SINGLE="SELECT_SINGLE",t.SET="SET",t.TEXT="TEXT";class i{}class a extends i{constructor(){super()}}class n extends i{constructor(){super()}}class r extends i{constructor(){super()}}class d extends i{}class s extends i{constructor(e,t){super(),this.level=e,this.text=t}}class o{constructor(e){this.option=e,this.hidden=!1,this.removed=!1,this.messages=[]}isHidden(){return this.hidden}isRemoved(){return this.removed}handle(e){if(e instanceof a)this.hidden=!0;else if(e instanceof n)this.hidden=!1,this.removed=!1;else if(e instanceof r)this.removed=!0;else if(e instanceof s)this.messages.push({level:e.level,text:e.text});else throw Error(`not a supported mutation: ${typeof e}`)}}class l extends o{isMandatory(){return this.mandatory}reset(){this.mandatory=this.option.required,this.hidden=!1,this.readonly=!1,this.removed=!1}constructor(e){super(e),this.mandatory=!1,this.readonly=!1,this.mandatory=e.required}handle(e){if(e instanceof d){this.mandatory=!0;return}super.handle(e)}}class u{static getNext(){return`${u.id++}`}}u.id=0;class c{constructor(e){this.id=e,this.sortOrder=-1,this.name=null,this.messages=[]}setSortOrder(e){return this.sortOrder=e,this}setName(e){return this.name=e,this}setMeta(e){return this.meta=e,this}setMessages(e){return this.messages=e,this}}class h extends c{constructor(e){super(e),this.mandatory=!1,this.readonly=!1}setMandatory(e){return this.mandatory=e,this}setReadonly(e){return this.readonly=e,this}}class m extends h{constructor(e){super(e),this.currentValue=0,this.minimum=null,this.maximum=null,this.step=null}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.CURRENCY,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step}}}class f extends c{constructor(e,t){super(e),this.fields=t}render(){return{id:this.id,type:e.SET,name:this.name,sortOrder:this.sortOrder,meta:this.meta,fields:this.fields,messages:this.messages}}}class b extends h{constructor(e){super(e),this.multiline=!1,this.currentValue=""}setMultiline(e){return this.multiline=e,this}setCurrentValue(e){return this.currentValue=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.TEXT,multiline:this.multiline,value:this.currentValue,readonly:this.readonly,messages:this.messages}}}class p extends l{getSetters(){return new Map([[this.textFieldId,e=>this.setValue(e)],[this.priceFieldId,e=>this.setPrice(e)]])}constructor(e){var t;super(e),this.textFieldId=u.getNext(),this.priceFieldId=u.getNext(),this.currentValue=null,this.price=null,this.currentValue=null!==(t=e.default)&&void 0!==t?t:""}hasValue(){return null!=this.currentValue&&""!=this.currentValue.trim()}hasValidValue(){var e;return!(this.isMandatory()||this.hasValue())||!((null!==(e=this.currentValue)&&void 0!==e?e:"").length>this.option.maxLength)&&!0}reset(){}clone(){let e=new p(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}setValue(e){this.currentValue=e}getValue(){return this.currentValue}setPrice(e){this.price=e}render(){var e,t;let i=new b(this.textFieldId).setName(this.option.name).setMultiline(this.option.multiline).setMandatory(this.mandatory).setReadonly(this.readonly).setCurrentValue(null!==(t=null!==(e=this.currentValue)&&void 0!==e?e:this.option.default)&&void 0!==t?t:"").setSortOrder(this.option.sortOrder).setMeta(null).render();if(!this.option.hasPrice)return i;let a=new m(this.priceFieldId).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setCurrentValue(this.price).setMinimum(0).setMeta(null).render();return new f(this.option.id,[i,a]).render()}buildDisplayComponent(){var e;return{name:this.option.name,value:null!==(e=this.currentValue)&&void 0!==e?e:"",sortOrder:this.option.sortOrder}}snapshot(){return{id:this.option.id,type:"TEXT",name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue,price:this.price}}restore(e){this.currentValue=e.value,this.option.hasPrice?this.price=e.price:this.price=null}}class y extends i{constructor(e){super(),this.optionSelectIds=e}}class O extends i{constructor(e){super(),this.optionSelectIds=e}}class g extends i{constructor(e){super(),this.optionSelectIds=e}}class S extends i{constructor(e){super(),this.optionSelectIds=e}}class I extends c{constructor(e,t){super(e),this.value=t}render(){return{id:this.id,name:this.value,sortOrder:this.sortOrder,meta:this.meta,type:e.LABEL,messages:this.messages}}}class E extends h{constructor(e){super(e),this.currentValue=null,this.minimum=null,this.maximum=null,this.step=null}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.QUANTITY,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step}}}class T extends c{constructor(e,t){super(e),this.fields=t}render(){return{id:this.id,type:e.GROUP,name:this.name,sortOrder:this.sortOrder,meta:this.meta,fields:this.fields,messages:this.messages}}}class V extends h{constructor(e){super(e),this.currentValues=[],this.options=[],this.minSelected=null,this.maxSelected=null}setOptions(e){return this.options=e,this}setCurrentValue(e){return this.currentValues=e,this}setMinSelectedValue(e){return this.minSelected=e,this}setMaxSelectedValue(e){return this.maxSelected=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.SELECT_MULTI,options:this.options,selectedOptions:this.currentValues,readonly:this.readonly,messages:this.messages,minSelected:this.minSelected,maxSelected:this.maxSelected}}}class M extends i{constructor(e){super(),this.readOnly=e}}class v extends l{constructor(e){super(e),this.selectLookup=new Map,this.currentValue=[],this.hiddenOptionSelects=new Set,this.optionSelectWithQuantityFieldIdLookup=new Map,this.selectFieldId=u.getNext(),this.selects=this.option.selects.map(e=>({id:e.id,name:e.name,sortOrder:e.sortOrder,meta:e.meta})),this.option.selects.forEach(e=>{this.selectLookup.set(e.id,e),this.option.defaultIds.includes(e.id)&&this.currentValue.push(new C(e.id))})}getSetters(){let e=new Map([[this.selectFieldId,e=>this.setValue(e)]]);return this.option.selects.filter(e=>e.hasQuantity).forEach(t=>{let i=u.getNext();this.optionSelectWithQuantityFieldIdLookup.set(t.id,i),e.set(i,e=>this.setSelectOptionQuantity(t.id,e))}),e}getValue(){return this.currentValue}hasValue(){return null!=this.currentValue&&this.currentValue.length>0}hasValidValue(){return!(this.isMandatory()||this.hasValue())||(null==this.option.minSelected||!(this.currentValue.length<this.option.minSelected))&&(null==this.option.maxSelected||!(this.currentValue.length>this.option.maxSelected))&&!0}reset(){super.reset(),this.hiddenOptionSelects=new Set}clone(){let e=new v(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e.hiddenOptionSelects=this.hiddenOptionSelects,e}handle(e){e instanceof y?e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.add(e)):e instanceof O?e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.delete(e)):e instanceof g?(e.optionSelectIds.forEach(t=>{if(this.currentValue.find(e=>e.id===this.selectLookup.get(t).id))return;let i=this.selectLookup.get(t);i.hasQuantity?this.currentValue.push(new N(i.id,null)):this.currentValue.push(new C(this.selectLookup.get(t).id)),this.option.selects.filter(t=>!e.optionSelectIds.includes(t.id)).forEach(e=>this.hiddenOptionSelects.add(e.id))}),this.readonly=!0):e instanceof S?(e.optionSelectIds.forEach(e=>{this.currentValue.push(new C(this.selectLookup.get(e).id))}),this.readonly=!1):e instanceof M?this.readonly=e.readOnly:super.handle(e)}buildDisplayComponent(){let e=this.currentValue.map(e=>{var t,i;return null!==(i=null===(t=this.selectLookup.get(e.id))||void 0===t?void 0:t.name)&&void 0!==i?i:""}).join(", ");return{name:this.option.name,value:e,sortOrder:this.option.sortOrder}}setValue(e){0===e.length&&(this.currentValue=[]);let t=new Map(this.currentValue.map(e=>[e.id,e])),i=[];e.forEach(e=>{let a=t.get(e);if(a)i.push(a);else{let t=this.selectLookup.get(e);if(!t)throw Error("not a valid selection");t.hasQuantity?i.push(new N(t.id,null)):i.push(new C(t.id))}this.currentValue=i})}setSelectOptionQuantity(e,t){let i=this.selectLookup.get(e);if(!i||!i.hasQuantity)throw Error("not a valid selection / cant set a quantity");let a=this.currentValue.find(t=>t.id===e);a?a.quantity=t:this.currentValue.push(new N(e,t))}render(){let e=this.selects.filter(e=>!this.hiddenOptionSelects.has(e.id)),t=this.currentValue.map(t=>e.find(e=>e.id===t.id)),i=this.currentValue.filter(e=>e instanceof N),a=new V(this.selectFieldId).setName(this.option.name).setOptions(e).setCurrentValue(t).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setMeta(this.option.meta).render();if(0===i.length)return a;let n=i.map((e,t)=>{let i=this.optionSelectWithQuantityFieldIdLookup.get(e.id),a=new I(`${i}-LABEL`,this.selectLookup.get(e.id).name).setSortOrder(0).render(),n=new E(i).setMandatory(!0).setReadonly(!1).setSortOrder(1).setCurrentValue(e instanceof N?e.quantity:null).render();return new f(e.id,[a,n]).setSortOrder(t).render()});return new T(this.option.id,[a,...n]).render()}snapshot(){let e=this.currentValue.map(e=>{let t=this.selectLookup.get(e.id);return{id:e.id,legacyId:t.legacyId,manufacturerKey:t.manufacturerKey,name:t.name,hasQuantity:t.hasQuantity,quantity:e instanceof N?e.quantity:null}});return{id:this.option.id,type:"SELECT_MULTI",legacyId:this.option.legacyId,name:this.option.name,values:e}}restore(e){let t=e.values.map(e=>e.id);for(let i=0;i<t.length;i++){let a=this.selectLookup.get(t[i]),n=e.values[i];a.hasQuantity?this.currentValue.push(new N(a.id,n.quantity)):this.currentValue.push(new C(a.id))}}}class C{constructor(e){this.id=e}}class N extends C{constructor(e,t){super(e),this.quantity=t}}class R extends h{constructor(e){super(e),this.currentValue=null,this.options=[]}setOptions(e){return this.options=e,this}setCurrentValue(e){return this.currentValue=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.SELECT_SINGLE,options:this.options,selectedOption:this.currentValue,readonly:this.readonly,messages:this.messages}}}class L extends l{constructor(e){super(e),this.selectFieldId=u.getNext(),this.selectLookup=new Map,this.optionSelectWithQuantityFieldIdLookup=new Map,this.currentValue=null,this.hiddenOptionSelects=new Set,this.selects=this.option.selects.map(e=>({id:e.id,name:e.name,sortOrder:e.sortOrder,meta:e.meta})),this.option.selects.forEach(e=>{this.selectLookup.set(e.id,e),this.option.defaultId==e.id&&(e.hasQuantity?this.currentValue=new N(e.id,null):this.currentValue=new C(e.id))})}getValue(e){return null===this.currentValue||!e&&this.hiddenOptionSelects.has(this.currentValue.id)?null:this.selects.find(e=>e.id===this.currentValue.id)}hasValue(){return null!=this.currentValue}hasValidValue(){return!this.isMandatory()&&this.hasValue(),!0}reset(){super.reset(),this.hiddenOptionSelects=new Set}clone(){let e=new L(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e.hiddenOptionSelects=this.hiddenOptionSelects,e}getSetters(){let e=new Map([[this.selectFieldId,e=>this.setValue(e)]]);return this.option.selects.filter(e=>e.hasQuantity).forEach(t=>{let i=u.getNext();this.optionSelectWithQuantityFieldIdLookup.set(t.id,i),e.set(i,e=>this.setSelectOptionQuantity(t.id,e))}),e}handle(e){if(e instanceof y)e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.add(e));else if(e instanceof O)e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.delete(e));else if(e instanceof g){if(e.optionSelectIds.length>1)throw Error("cant auto select multiple on a single");this.selectLookup.get(e.optionSelectIds[0])&&(this.currentValue=new C(e.optionSelectIds[0]),this.readonly=!0,this.hiddenOptionSelects.clear(),this.option.selects.filter(t=>t.id!=e.optionSelectIds[0]).forEach(e=>this.hiddenOptionSelects.add(e.id)))}else if(e instanceof S){if(e.optionSelectIds.length>1)throw Error("cant auto select multiple on a single");this.selectLookup.get(e.optionSelectIds[0])&&(this.currentValue=new C(e.optionSelectIds[0])),this.readonly=!1}else e instanceof M?this.readonly=e.readOnly:super.handle(e)}buildDisplayComponent(){var e,t;let i="";return this.currentValue&&(i=null!==(t=null===(e=this.selectLookup.get(this.currentValue.id))||void 0===e?void 0:e.name)&&void 0!==t?t:""),{name:this.option.name,value:i,sortOrder:this.option.sortOrder}}setValue(e){if(null===e){this.currentValue=null;return}let t=this.selectLookup.get(e);if(!t)throw Error("not a valid selection");if(null===this.currentValue||this.currentValue.id!==t.id)t.hasQuantity?this.currentValue=new N(t.id,null):this.currentValue=new C(t.id)}setSelectOptionQuantity(e,t){var i;let a=this.selectLookup.get(e);if(!a||!a.hasQuantity)throw Error("not a valid selection / cant set a quantity");(null===(i=this.currentValue)||void 0===i?void 0:i.id)===e?this.currentValue.quantity=t:this.currentValue=new N(e,t)}render(){var e;let t=this.selects.filter(e=>!this.hiddenOptionSelects.has(e.id)),i=null!==(e=t.find(e=>{var t;return e.id===(null===(t=this.currentValue)||void 0===t?void 0:t.id)}))&&void 0!==e?e:null,a=this.currentValue instanceof N,n=new R(this.selectFieldId).setName(this.option.name).setOptions(t).setCurrentValue(i).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setMeta(this.option.meta).render();if(!a)return n;let r=this.optionSelectWithQuantityFieldIdLookup.get(this.currentValue.id),d=new I(`${r}-LABEL`,this.selectLookup.get(this.currentValue.id).name).setSortOrder(0).render(),s=new E(r).setMandatory(!0).setReadonly(!1).setSortOrder(1).setCurrentValue(this.currentValue instanceof N?this.currentValue.quantity:null).render(),o=new f(this.currentValue.id,[d,s]).setSortOrder(this.option.sortOrder+1).render();return new T(this.option.id,[n,o]).render()}snapshot(){var e;let t=null!=this.currentValue&&null!==(e=this.selectLookup.get(this.currentValue.id))&&void 0!==e?e:null,i=t instanceof N?t.quantity:null,a=null;return t&&(a={id:t.id,name:t.name,hasQuantity:t.hasQuantity,manufacturerKey:t.manufacturerKey,legacyId:t.legacyId,quantity:i}),{id:this.option.id,legacyId:this.option.legacyId,type:"SELECT_SINGLE",name:this.option.name,value:a}}restore(e){var t,i,a,n;let r=null===(t=e.value)||void 0===t?void 0:t.id;r&&(this.currentValue=null!==(i=this.selectLookup.get(r))&&void 0!==i?i:null,(null===(a=e.value)||void 0===a?void 0:a.quantity)&&this.currentValue instanceof N&&(this.currentValue=new N(r,null===(n=e.value)||void 0===n?void 0:n.quantity)))}}class F extends h{constructor(e){super(e),this.currentValue=0,this.minimum=null,this.maximum=null,this.step=null,this.unit="MM"}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}setUnit(e){return this.unit=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.MEASUREMENT,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step,unit:this.unit}}}class w extends l{constructor(e){super(e),this.measurementFieldId=u.getNext(),this.currentValue=null,this.currentValue=e.value}reset(){}hasValue(){return null!=this.currentValue}hasValidValue(){return!this.isMandatory()&&this.hasValue(),!0}clone(){let e=new w(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}getSetters(){return new Map([[this.measurementFieldId,e=>this.setValue(e)]])}setValue(e){null!=e?"number"==typeof e?this.currentValue=e:this.currentValue=parseFloat(e):this.currentValue=null}getValue(){return this.currentValue}handle(e){super.handle(e)}buildDisplayComponent(){var e,t;return{name:this.option.name,value:null!==(t=null===(e=this.currentValue)||void 0===e?void 0:e.toFixed(0))&&void 0!==t?t:"0",sortOrder:this.option.sortOrder}}render(){var e;return new F(this.measurementFieldId).setName(this.option.name).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setStep(this.option.step).setMaximum(this.option.maximum).setMinimum(null!==(e=this.option.minimum)&&void 0!==e?e:0).setCurrentValue(this.currentValue).setMeta(this.option.meta).render()}snapshot(){return{type:"MEASUREMENT",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class P extends o{constructor(e){super(e)}clone(){let e=new P(this.option);return e.hidden=this.hidden,e}render(){throw Error("Method not implemented.")}}class A extends i{constructor(e,t){super(),this.min=e,this.max=t}}class D{}class x extends D{constructor(e){super(),this.value=e}}class U{constructor(e){this.config=e}}class K{}class _ extends i{constructor(e){super(),this.value=e}}class W extends D{constructor(e){super(),this.pricingConfig=e}}class G extends D{constructor(e,t,i){super(),this.name=e,this.minimum=t,this.maximum=i}}class H extends D{constructor(e){super(),this.modifier=e}}class Q extends D{constructor(e){super(),this.modifier=e}}class k{constructor(e,t,i){this.productConfig=e,this.modelState=t,this.engine=i,this.ceil=Math.ceil,this.floor=Math.floor,this.round=Math.round}setNumericVariableMinMax(e,t,i){this.modelState.addModelMutation(new G(e,t,i))}overrideMinMaxForOption(e,t,i){this.modelState.addOptionMutation(e,new A(t,i))}selectOptionForceSelect(e,t){this.modelState.addOptionMutation(e,new g(t))}selectOptionDefaultSelect(e,t){this.modelState.addOptionMutation(e,new S(t))}showSelectFieldOption(e,t){this.modelState.addOptionMutation(e,new O(t))}hideSelectFieldOption(e,t){this.modelState.addOptionMutation(e,new y(t))}showOption(e){this.modelState.addOptionMutation(e,new n)}hideOption(e){this.modelState.addOptionMutation(e,new a)}setOptionReadOnly(e,t){this.modelState.addOptionMutation(e,new M(t))}removeOption(e){this.modelState.addOptionMutation(e,new r)}setOptionRequired(e){this.modelState.addOptionMutation(e,new d)}addOptionMessage(e,t,i){this.modelState.addMessage({level:t,text:i}),this.modelState.addOptionMutation(e,new s(t,i))}addOptionPropertyMessage(e,t,i){throw Error("Method not implemented.")}addMessage(e,t){this.modelState.addMessage({level:e,text:t})}updateStringVariable(e,t){this.modelState.setVariableValue(e,t)}optionHasValue(e){return this.modelState.optionHasValue(e)}optionHasValidValue(e){return this.modelState.optionHasValidValue(e)}updateNumericVariable(e,t){this.modelState.setVariableValue(e,t)}updateBooleanVariable(e,t){this.modelState.setVariableValue(e,t)}log(e){console.log(e)}getOptionNumericValue(e){var t;return null!==(t=this.modelState.getOptionValue(e))&&void 0!==t?t:0}getOptionTextValue(e){return this.modelState.getOptionValue(e)}restoreOptionSnapshot(e){this.modelState.restoreOption(e)}snapshotOption(e){return this.modelState.buildOptionSnapshot(e)}getVariableByName(e){return this.modelState.getVariableValue(e)}getPriceGrid(e){return this.modelState.getPriceGridById(e)}getDate(){return Date.now()}anyOptionSelected(e,t,i){let a=this.modelState.getOptionValue(e,i);return!!a&&a.some(e=>t.includes(e.id))}adjustSellPrice(e){this.modelState.addModelMutation(new x(e))}setPricingMode(e){this.modelState.addModelMutation(new W(e))}addBasePriceModifier(e){this.modelState.addModelMutation(new H(e))}addOptionPriceModifier(e){this.modelState.addModelMutation(new Q(e))}setDisplayOptionValue(e,t){this.modelState.addOptionMutation(e,new _(t))}setVariableValue(e,t){this.modelState.setVariableValue(e,t)}getValueByCalculationKey(e){return this.modelState.getValueByCalculationKey(e)}getIntervalPartMapping(e,t){var i;return null!==(i=t.find(t=>t[0]<=e))&&void 0!==i?i:t[t.length-1]}loadSubProduct(e){this.modelState.addModelMutation(new U(e))}unloadSubProduct(){this.modelState.addModelMutation(new K)}getSubEngineContext(){return this.engine.getSubEngineExecutionContext()}getInputOptionSnapshot(e){return this.modelState.buildOptionSnapshot(e)}restoreInputOptionSnapshot(e){var t;this.productConfig.meta.attributes.optionSyncPassthrough?null===(t=this.getSubEngineContext())||void 0===t||t.restoreInputOptionSnapshot(e):this.modelState.restoreOption(e)}restoreInputOptionSnapshotIfEmpty(e){var t;this.productConfig.meta.attributes.optionSyncPassthrough?null===(t=this.getSubEngineContext())||void 0===t||t.restoreInputOptionSnapshotIfEmpty(e):!this.modelState.optionHasValidValue(e.id)&&this.modelState.restoreOption(e)}updateVariableMaximumsFromPriceGrid(e){let t=this.modelState.getPriceGridById(e);if(null==t)throw Error(`price grid: ${e} not found`);let i=t.xSpacings[t.xSpacings.length-1];if(this.setNumericVariableMinMax(t.xVariable,null,i),null!=t.yVariable){let e=t.ySpacings[t.ySpacings.length-1];this.setNumericVariableMinMax(t.yVariable,null,e)}}}class Y extends o{constructor(e){var t;super(e),this.currentValue=null,this.currentValue=null!==(t=e.value)&&void 0!==t?t:""}clone(){let e=new Y(this.option);return e.hidden=this.hidden,e.currentValue=this.currentValue,e}setValue(e){this.currentValue=e}render(){return new I(this.option.id,this.option.value).setSortOrder(this.option.sortOrder).setMeta(null).render()}handle(e){e instanceof _?this.currentValue=e.value:super.handle(e)}snapshot(){return{type:"DISPLAY",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class B extends l{constructor(e){super(e),this.numberFieldId=u.getNext(),this.currentValue=null,this.currentValue=e.value}clone(){let e=new B(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}reset(){}hasValue(){return null!=this.currentValue}hasValidValue(){var e,t;if(!this.isMandatory()&&!this.hasValue())return!0;let i=null!==(e=this.currentValue)&&void 0!==e?e:0;return(null==this.option.minimum||!(i<this.option.minimum))&&(null==this.option.maximum||!(i>this.option.maximum))&&(null==this.option.step||(i-(null!==(t=this.option.minimum)&&void 0!==t?t:0))%this.option.step==0)&&!0}getSetters(){return new Map([[this.numberFieldId,e=>this.setValue(e)]])}setValue(e){this.currentValue=e}getValue(){return this.currentValue}handle(e){super.handle(e)}buildDisplayComponent(){var e,t;return{name:this.option.name,value:null!==(t=null===(e=this.currentValue)||void 0===e?void 0:e.toFixed(0))&&void 0!==t?t:"0",sortOrder:this.option.sortOrder}}render(){return new E(this.numberFieldId).setName(this.option.name).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setStep(this.option.step).setMaximum(this.option.maximum).setMinimum(this.option.minimum).setCurrentValue(this.currentValue).setMeta(null).render()}snapshot(){return{type:"NUMERIC",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class q{constructor(e,t,i){this.productConfig=e,this.environment=t,this.initialValues=i,this.optionState=new Map,this.optionParentLookup=new Map,this.variableLookup=new Map,this.priceGridLookup=new Map,this.optionLookup=new Map,this.modelMutations=[],this.basePriceModifiers=[],this.optionPriceModifiers=[],this.messages=[],this.subProductConfig=null,this.pricingConfigOverride=null,e.priceGrids.forEach(e=>this.priceGridLookup.set(e.id,e)),this.buildOptionLookup(e.options,null),e.variables.forEach(e=>{this.variableLookup.set(e.name,Object.assign({},e))}),this.buildOptionState(),this.optionByCalculationKeyLookup=this.buildOptionByCalculationKeyLookup(),this.fieldStateSetters=this.getSetters(),this.setInitialValues(),this.setInitialValues()}getProductId(){return this.productConfig.meta.id}setInitialValues(){var e;if(this.initialValues){let t=Object.keys(this.initialValues);if(0===t.length)return;let i=null!==(e=this.productConfig.initialValues)&&void 0!==e?e:[];for(let e of t){let t=i.find(t=>t.key===e);if(!t)throw Error(`no initial value schema found ${e}`);let a=this.variableLookup.get(t.key);if(!a||"SYSTEM"!==a.type)throw Error(`no variable found for initial value schema ${e}`);let n=this.initialValues[e];void 0!==n&&this.setVariableValue(a.name,n)}}}getSetters(){let e=new Map;return this.optionState.forEach(t=>{t instanceof l&&t.getSetters().forEach((t,i)=>{e.set(i,t)})}),e}resetForEvaluation(){this.messages=[],this.modelMutations=[],this.basePriceModifiers=[],this.optionPriceModifiers=[],this.subProductConfig=null,this.pricingConfigOverride=null,this.setInitialValues(),this.optionState.forEach(e=>{e instanceof l&&e.reset()});let e=this.productConfig.variables.filter(e=>"SYSTEM"===e.type&&"NUMERIC"===e.dataType);if(this.variableLookup.forEach(t=>{if("SYSTEM"!=t.type||"NUMERIC"!==t.dataType)return;let i=e.find(e=>e.name===t.name);if(!!i)t.maximum=i.maximum,t.minimum=i.minimum}),"PRICE_GRID"==this.productConfig.pricing.mode.type){let e=this.priceGridLookup.get(this.productConfig.pricing.mode.priceGridId);this.setMaximumMinFromPriceGrid(e)}}buildOptionLookup(e,t){e.forEach(e=>{this.optionLookup.set(e.id,e),t&&this.optionParentLookup.set(e.id,t),"GROUP"===e.type&&this.buildOptionLookup(e.subOptions,e.id)})}buildOptionByCalculationKeyLookup(){let e=new Map;for(let t of this.optionState.values()){if(!t.option.calculationKey)continue;let i=e.get(t.option.calculationKey);!i&&(i=[],e.set(t.option.calculationKey,i)),i.push(t)}return e}buildOptionState(){this.optionLookup.forEach(e=>{switch(e.type){case"TEXT":this.optionState.set(e.id,new p(e));break;case"DISPLAY":this.optionState.set(e.id,new Y(e));break;case"SELECT_SINGLE":this.optionState.set(e.id,new L(e));break;case"SELECT_MULTI":this.optionState.set(e.id,new v(e));break;case"MEASUREMENT":this.optionState.set(e.id,new w(e));break;case"NUMERIC":this.optionState.set(e.id,new B(e));break;case"GROUP":this.optionState.set(e.id,new P(e))}})}hasField(e){return this.fieldStateSetters.has(e)}getOptionValue(e,t){let i=this.optionState.get(e);if(!t&&this.optionIsRemoved(e))return null;if(i instanceof L){let e=i.getValue(t);if(e)return[e]}else if(i instanceof v)return i.getValue();else if(i instanceof w)return i.getValue();return null}renderOption(e){let t=this.optionState.get(e);if(t)return this.isOptionVisible(e)?t.render():null;throw Error("no option found")}getVariableValue(e){let t=this.variableLookup.get(e);if(!t)throw Error(`no variable found \`${e}\``);switch(t.type){case"USER":case"SYSTEM":return t.value;case"COMPUTED":return t.calculate(new k(this.productConfig,this,null));default:throw Error("unknown variable type")}}getNumericVariable(e){return this.variableLookup.get(e)}optionHasValue(e){let t=this.optionState.get(e);return!!t&&t instanceof l&&t.hasValue()}optionHasValidValue(e){let t=this.optionState.get(e);return!!t&&t instanceof l&&t.hasValidValue()}setVariableValue(e,t){let i=this.variableLookup.get(e);if(i){if("USER"===i.type||"SYSTEM"===i.type)switch(i.dataType){case"STRING":i.value=t;break;case"NUMERIC":"number"!=typeof t&&(t=parseFloat(t)),i.value=t;break;case"BOOLEAN":i.value=!!t;break;case"ENUM":if(-1===i.values.indexOf(t))throw Error(`invalid value ${t} for enum ${i.name}`);i.value=t;break;case"ANY":i.value=t}else throw Error(`cannot set value ${t} for variable ${e} of type ${i.type}`)}else{let i={name:e,type:"USER",dataType:"ANY",value:t};this.variableLookup.set(e,i)}}getValueByCalculationKey(e){if(this.variableLookup.has(e))return this.getVariableValue(e);let t=this.optionByCalculationKeyLookup.get(e);if(!t)return;let i=t[0];if(t.length>1){let a=t.filter(e=>!this.optionIsRemoved(e.option.id));if(a.length>1)throw Error(`multiple options not marked as removed found for key: ${e}`);if(0===a.length)return;i=a[0]}switch(i.option.type){case"SELECT_MULTI":let a=i;return a.getValue().map(e=>e.id).map(e=>a.option.selects.find(t=>t.id===e).manufacturerKey);case"SELECT_SINGLE":let n=i,r=n.getValue();if(r)return n.option.selects.find(e=>e.id===(null==r?void 0:r.id)).manufacturerKey;return null;case"MEASUREMENT":case"NUMERIC":case"TEXT":return i.getValue()}}setTextFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setNumericFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setBooleanFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setSingleSelectFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setMultiSelectFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}getPriceGridById(e){return this.priceGridLookup.get(e)}addMessage(e){this.messages.push(e)}getMessages(){return this.messages}addOptionMutation(e,t){this.optionState.get(e).handle(t)}addModelMutation(e){if(e instanceof U)this.subProductConfig=e.config;else if(e instanceof K)this.subProductConfig=null;else if(e instanceof W){if(this.pricingConfigOverride=e.pricingConfig,"PRICE_GRID"==this.pricingConfigOverride.mode.type){let t=e.pricingConfig.mode,i=this.priceGridLookup.get(t.priceGridId);this.setMaximumMinFromPriceGrid(i)}}else if(e instanceof G){let t=this.variableLookup.get(e.name);(null==t?void 0:t.dataType)=="NUMERIC"&&(e.maximum&&(t.maximum=e.maximum),e.minimum&&(t.minimum=e.minimum))}else e instanceof H?this.basePriceModifiers.push(e.modifier):e instanceof Q&&this.optionPriceModifiers.push(e.modifier);this.modelMutations.push(e)}setMaximumMinFromPriceGrid(e){let t=e.xSpacings[0],i=e.xSpacings[e.xSpacings.length-1];if(this.addModelMutation(new G(e.xVariable,t,i)),e.yVariable){let t=e.ySpacings[0],i=e.ySpacings[e.ySpacings.length-1];this.addModelMutation(new G(e.yVariable,t,i))}}isOptionVisible(e){let t=this.optionState.get(e);return!(t.isRemoved&&t.isRemoved())&&!t.isHidden()&&this.optionIsVisibleForCurrentAudience(e)}isOptionVisibleForReporting(e,t){if(this.optionIsRemoved(e))return!1;let i=this.optionState.get(e);return!i.hidden&&this.optionIsVisibleForAudience(e,t)}subProductConfigToLoad(){return this.subProductConfig}pricingConfigurationOverride(){return this.pricingConfigOverride}getBasePriceModifiers(){return this.basePriceModifiers}getOptionPriceModifiers(){return this.optionPriceModifiers}buildComponents(){let e=t=>{if(!this.isOptionVisibleForReporting(t.id,"QUOTE"))return[];switch(t.type){case"GROUP":return t.subOptions.flatMap(e);case"DISPLAY":return[];case"TEXT":case"SELECT_SINGLE":case"SELECT_MULTI":case"NUMERIC":case"MEASUREMENT":return[this.optionState.get(t.id).buildDisplayComponent()]}};return this.productConfig.options.flatMap(e)}buildOptionSnapshot(e){let t=this.optionState.get(e);if(t instanceof l)return t.snapshot();throw Error(`option: ${e} is not an input`)}buildSnapshot(){let e=[];for(let t of this.optionState.values())t instanceof l&&!t.isRemoved()&&e.push(t.snapshot());let t=[];for(let e of this.variableLookup.values())t.push({type:e.type,dataType:e.dataType,name:e.name,value:this.getVariableValue(e.name)});let i={meta:this.productConfig.meta,initialValues:this.initialValues,options:e,variables:t,subProducts:[]};return{meta:{engineVersion:"1.0.0",productConfigVersion:"1.0.1",id:this.productConfig.meta.id},products:[i]}}isOrderable(){let e=t=>{if("GROUP"==t.type)return!!this.optionState.get(t.id).isRemoved()||!this.optionIsVisibleForCurrentAudience(t.id)||t.subOptions.every(t=>e(t));let i=this.optionState.get(t.id);if(i instanceof l){if(i.isHidden()||!this.optionIsVisibleForCurrentAudience(t.id)||!i.isMandatory())return!0;if(!i.hasValue())return!1}return!0};if(this.messages.some(e=>"ERROR"==e.level))return!1;for(let t=0;t<this.productConfig.options.length;t++)if(!e(this.productConfig.options[t]))return!1;return!0}restoreOption(e){let t=this.optionState.get(e.id);if(!t)throw Error(`no option found for id ${e.id}, ${e.name}, ${e.type}, ${e.legacyId}`);t.restore(e)}optionIsVisibleForCurrentAudience(e){return this.optionIsVisibleForAudience(e,this.environment.audience)}optionIsVisibleForAudience(e,t){let i=this.optionLookup.get(e).audienceVisibility;return(null==i?!void 0:!i.hiddenFrom.includes(t))&&((null==i?!!void 0:!!i.visibleTo.includes(t))||(null==i?!void 0:!i.hiddenFrom.includes("ALL"))&&((null==i?!!void 0:!!i.visibleTo.includes("ALL"))||!1))}optionIsRemoved(e){if(this.optionState.get(e).isRemoved())return!0;let t=this.optionParentLookup.get(e);return null!=t&&this.optionIsRemoved(t)}restoreVariables(e){e.forEach(e=>{let t=this.variableLookup.get(e.name);t&&("SYSTEM"==t.type||"USER"==t.type)&&(t.value=e.value)})}}function $(e,t){let i=Math.sign(e),a=Math.pow(10,t);return Math.round(e*a)/a*i}let j={PRODUCT_HEIGHT:"PRODUCT_HEIGHT",PRODUCT_WIDTH:"PRODUCT_WIDTH",WINDOW_WIDTH:"WINDOW_WIDTH",WINDOW_HEIGHT:"WINDOW_HEIGHT"};class X{constructor(e,t,i=!1,a){this.environment=e,this.productBundle=t,this.subEngine=i,this.currentSubEngine=null,this.engineId=u.getNext();let n=null!=a?a:t.meta.initialProductId,r=t.products.find(e=>e.meta.id==n);if(!r)throw Error(`product id: ${n} not found in bundle`);this.productConfiguration=r}initModel(e){if(this.currentModel=new q(this.productConfiguration,this.environment,e),this.productConfiguration.initModel){let e=new k(this.productConfiguration,this.currentModel,this);this.productConfiguration.initModel(e)}}getExecutionContext(){return new k(this.productConfiguration,this.currentModel,this)}getSubEngineExecutionContext(){var e;return null===(e=this.currentSubEngine)||void 0===e?void 0:e.getExecutionContext()}buildResults(){var e;let t=this.currentModel.subProductConfigToLoad(),i=this.execute(),n=this.currentModel.subProductConfigToLoad();if(null!=n){let i=JSON.stringify(t),r=JSON.stringify(n);if(this.currentSubEngine&&n.productId===(null===(e=this.currentSubEngine)||void 0===e?void 0:e.productConfiguration.meta.id)&&i==r){if(null!=n.variables){for(let e in n.variables){let t=n.variables[e];null!=t&&!isNaN(t)&&this.currentSubEngine.currentModel.setVariableValue(e,t)}this.currentSubEngine.buildResults()}}else{let e=null;if(this.currentSubEngine&&(e=this.currentSubEngine.publish()),this.currentSubEngine=this.createSubEngine(n.productId),e)try{this.currentSubEngine.restoreProduct(!0,e.meta,e.products[0],n.initialValues)}catch(e){console.error(e)}else this.currentSubEngine.init(n.initialValues);if(null!=n.optionValues)for(let e in n.optionValues)this.currentSubEngine.currentModel.addOptionMutation(e,new g([n.optionValues[e]])),this.currentSubEngine.currentModel.addOptionMutation(e,new a);if(null!=n.variables){for(let e in n.variables)this.currentSubEngine.currentModel.setVariableValue(e,n.variables[e]);this.currentSubEngine.buildResults()}}}else this.currentSubEngine=null;if(!this.currentSubEngine)return i;let r=this.currentSubEngine.buildResults();return i.messages.push(...r.messages),Object.assign(Object.assign({},i),{availableFields:[...i.availableFields,...r.availableFields],isOrderable:i.isOrderable&&r.isOrderable})}onFieldUpdate(e){var t;return this.currentModel.hasField(e.id)?this.setFieldValueOnState(e):null===(t=this.currentSubEngine)||void 0===t||t.onFieldUpdate(e),this.buildResults()}init(e){return this.initModel(e),this.execute()}execute(){var e,t;this.executeRules();let i=[];this.productConfiguration.options.forEach(e=>{let t=this.buildFields(e,this.currentModel);i.push(...t)});let a=this.getPricingCalculator().calculate().totalPrice;a=isNaN(a)?0:a;let n=this.currentModel.buildComponents(),r=this.currentModel.isOrderable();if(this.productBundle.products.length>1&&this.currentModel.getProductId()==this.productBundle.meta.id&&null==this.currentSubEngine&&(r=!1),this.currentSubEngine){let i=this.currentSubEngine.execute();n=[...n,...null!==(t=null===(e=i.productConfiguration[0])||void 0===e?void 0:e.components)&&void 0!==t?t:[]];let d=i.productConfiguration[0].pricing.extendedSellPriceExTax;a+=isNaN(d)?0:d,r=r&&this.currentSubEngine.currentModel.isOrderable()}let d={productConfiguration:[{id:this.productConfiguration.meta.id,partNumber:this.productConfiguration.meta.id,name:this.productConfiguration.meta.name,description:this.productConfiguration.meta.description,notes:null,components:n,pricing:{unitSellPriceExTax:this.toMoney(a),unitSellPriceIncTax:this.toMoney(1.1*a),extendedSellPriceExTax:this.toMoney(a),extendedSellPriceIncTax:this.toMoney(1.1*a)}}],availableFields:i,isOrderable:r,messages:this.currentModel.getMessages()};return this.transformResult?this.transformResult(d):d}toMoney(e){return null===e?NaN:parseFloat($(e,2).toFixed(2))}executeRules(){let e=new k(this.productConfiguration,this.currentModel,this);this.currentModel.resetForEvaluation(),this.productConfiguration.initModel&&this.productConfiguration.initModel(e),this.productConfiguration.rules.forEach(t=>{this.executeRule(e,t)})}executeRule(e,t){t.evaluateConditions(e)?t.actionOnTrue(e):t.actionOnFalse&&t.actionOnFalse(e)}setFieldValueOnState(t){var i,a,n,r,d;switch(t.type){case e.SELECT_SINGLE:this.currentModel.setSingleSelectFieldValue(t.id,null!==(a=null===(i=t.selectedOption)||void 0===i?void 0:i.id)&&void 0!==a?a:null);break;case e.SELECT_MULTI:this.currentModel.setMultiSelectFieldValue(t.id,t.selectedOptions.map(e=>e.id));break;case e.MEASUREMENT:case e.CURRENCY:case e.QUANTITY:this.currentModel.setNumericFieldValue(t.id,null!==(n=t.value)&&void 0!==n?n:0);break;case e.BOOLEAN:this.currentModel.setBooleanFieldValue(t.id,null!==(r=t.value)&&void 0!==r&&r);break;case e.TEXT:this.currentModel.setTextFieldValue(t.id,null!==(d=t.value)&&void 0!==d?d:"");break;default:throw Error(`Unknown field type ${t.type}`)}}buildFields(t,i){if("GROUP"===t.type){if(!i.isOptionVisible(t.id))return[];let a=[];return(t.subOptions.forEach(e=>{let t=this.buildFields(e,i);a.push(...t)}),0==a.length)?[]:[{id:t.id,type:e.GROUP,name:t.name,sortOrder:t.sortOrder,fields:a,meta:t.meta,messages:null}]}{let e=i.renderOption(t.id);return e?[e]:[]}}publish(){let e=this.currentModel.buildSnapshot();if(!this.currentSubEngine)return e;let t=this.currentSubEngine.publish();return e.products[0].subProducts=t.products,e}restore(e,t){let i=e.products.find(e=>e.meta.id===this.productConfiguration.meta.id);return this.restoreProduct(!1,e.meta,i,t),{evaluationResult:this.buildResults(),messages:[]}}restoreProduct(e,t,i,a){var n;let r=this.migrateProductSnapshot(t,i);for(let t of(this.initModel(a),r.options))try{this.currentModel.restoreOption(t)}catch(t){if(!e)throw t}this.currentModel.restoreVariables(r.variables),(null===(n=i.subProducts)||void 0===n?void 0:n.length)==1&&this.buildResults();let d=this.currentModel.subProductConfigToLoad();null!==d&&(this.currentSubEngine=this.createSubEngine(d.productId),this.currentSubEngine.restoreProduct(!1,t,i.subProducts.find(e=>e.meta.id===d.productId),a))}migrateProductSnapshot(e,t){if("1.0.1"==e.productConfigVersion)return t;let i=t.variables.find(e=>e.name==j.PRODUCT_WIDTH);i&&(i.name=j.WINDOW_WIDTH);let a=t.variables.find(e=>e.name==j.PRODUCT_HEIGHT);return a&&(a.name=j.WINDOW_HEIGHT),t}order(e){throw Error("Method not implemented.")}}class J{constructor(e,t,i,a,n){this.totalPrice=e,this.totalDiscount=t,this.basePrice=i,this.optionPrice=a,this.additionalComponents=n}}class z{constructor(e,t){this.productConfig=e,this.state=t}calculate(){let e=this.calculateBasePrice(),t=this.applyBasePriceModifiers(e)+this.calculateOptionPrice();return new J(t,0,t,0,[])}calculateOptionPrice(){let e=this.state.getOptionPriceModifiers(),t=0;for(let i=0;i<e.length;i++){let a=e[i];"FLAT"==a.type&&(t+=a.value)}return t}applyBasePriceModifiers(e){let t=this.state.getBasePriceModifiers();if(0==t.length)return e;let i=e,a=t.filter(e=>"CURRENCY"==e.type);for(let e=0;e<a.length;e++)i+=a[e].value;let n=t.filter(e=>"FACTOR"==e.type);for(let e=0;e<n.length;e++)i*=n[e].value;return i}calculateBasePrice(){let e=this.productConfig.pricing,t=this.state.pricingConfigurationOverride();null!=t&&(e=t);let i=e.mode;switch(i.type){case"FREE":case"FLAT":break;case"PRICE_GRID":let a=this.state.getPriceGridById(i.priceGridId);if(null==a)throw Error(`Price grid not found: ${i.priceGridId}`);return this.evaluatePriceGrid(a);case"SQUARE_DIMENSIONS":let n=i.category,r=null;switch(n){case"MAJOR":r="SQUARE_MAJOR";break;case"MINOR":r="SQUARE_MINOR"}let d=this.state.getValueByCalculationKey(r)*i.rate;switch(i.rounding.type){case"NONE":return d;case"FLOOR":return Math.floor(d);case"CEILING":return Math.ceil(d);case"HALF_UP":return $(d,i.rounding.decimals)}}return NaN}evaluatePriceGrid(e){let t=this.state.getVariableValue(e.xVariable),i=0;if(null!=e.yVariable){let t=this.state.getVariableValue(e.yVariable);for(let a=0;a<e.ySpacings.length;a++)if(t<=e.ySpacings[a]){i=a;break}}let a=0;for(let i=0;i<e.xSpacings.length;i++)if(t<=e.xSpacings[i]){a=i;break}return e.values[i][a]}}class Z{constructor(e,t=!1){this.productAttributes=e,this.readonlyWidth=t,this.widthFieldId=u.getNext(),this.heightFieldId=u.getNext()}render(e){let t=[];if(this.productAttributes.hasWidth){let i=e.getNumericVariable(j.WINDOW_WIDTH),a=new F(this.widthFieldId).setSortOrder(1).setName("Width").setMeta("dimensions--width").setMinimum(i.minimum).setMaximum(i.maximum).setReadonly(this.readonlyWidth).setCurrentValue(e.getVariableValue(j.WINDOW_WIDTH));t.push(a.render())}if(this.productAttributes.hasHeight){let i=e.getNumericVariable(j.WINDOW_HEIGHT),a=new F(this.heightFieldId).setSortOrder(2).setName("Height").setMeta("dimensions--height").setMinimum(i.minimum).setMaximum(i.maximum).setCurrentValue(e.getVariableValue(j.WINDOW_HEIGHT));t.push(a.render())}if(1==t.length)return t[0];let i=new f("DIMENSIONS",t);return i.setMeta("dimensions"),i.render()}isDimensionField(e){return e==this.widthFieldId||e==this.heightFieldId}setValue(e,t){if(e.id==this.widthFieldId)t.setVariableValue(j.WINDOW_WIDTH,e.value);else if(e.id==this.heightFieldId)t.setVariableValue(j.WINDOW_HEIGHT,e.value);else throw Error("Unknown field id: "+e.id)}hasValues(e){let t=!0;return this.productAttributes.hasHeight&&(t=e.getVariableValue(j.WINDOW_HEIGHT)>0),this.productAttributes.hasWidth&&(t=t&&e.getVariableValue(j.WINDOW_WIDTH)>0),t}getDimensionText(e){let t=[];if(this.productAttributes.hasWidth){let i=e.getVariableValue(j.WINDOW_WIDTH);i>0&&t.push(i.toFixed(0)+"mm")}if(this.productAttributes.hasHeight){let i=e.getVariableValue(j.WINDOW_HEIGHT);i>0&&t.push(i.toFixed(0)+"mm")}return t.join(" x ")}}class ee extends X{constructor(e,t,i=!1,a){super(e,t,i,a),this.productDimensionsState=null,(this.productConfiguration.meta.attributes.hasHeight||this.productConfiguration.meta.attributes.hasWidth)&&(this.productDimensionsState=new Z(this.productConfiguration.meta.attributes))}createSubEngine(e){return new ee(this.environment,this.productBundle,!0,e)}getPricingCalculator(){return new z(this.productConfiguration,this.currentModel)}initialValueSchema(){var e;return null!==(e=this.productConfiguration.initialValues)&&void 0!==e?e:[]}onFieldUpdate(e){return this.productDimensionsState&&this.productDimensionsState.isDimensionField(e.id)?(this.productDimensionsState.setValue(e,this.currentModel),super.execute()):super.onFieldUpdate(e)}handleFabricColourField(e){return"GROUP"==e.type?Object.assign(Object.assign({},e),{fields:e.fields.map(e=>this.handleFabricColourField(e))}):("SELECT_SINGLE"==e.type&&"fabric-color"==e.meta&&(e.meta="fabric-color--blockout"),e)}transformResult(e){var t;if(!this.productDimensionsState)return e;let i=[];if("PRIMARY"==this.currentModel.getValueByCalculationKey("MOUNT_POSITION")){i.push(this.productDimensionsState.render(this.currentModel));let a=e.productConfiguration[0];a&&(null===(t=a.components)||void 0===t||t.unshift({sortOrder:-1,name:"Dimensions",value:this.productDimensionsState.getDimensionText(this.currentModel)}))}return e.availableFields=i.concat(e.availableFields).map(e=>this.convertMeasurementGroups(e)),e.isOrderable=e.isOrderable&&this.productDimensionsState.hasValues(this.currentModel),e}convertMeasurementGroups(t){if("GROUP"!=t.type)return t;if(t.fields.every(e=>"MEASUREMENT"==e.type)){let i=t.fields;return Object.assign(Object.assign({},t),{type:e.SET,fields:i,messages:[]})}let i=this;return Object.assign(Object.assign({},t),{fields:t.fields.map(e=>i.convertMeasurementGroups(e))})}}let et=new ee({apiUrl:"",apiToken:"",audience:"ECOMMERCE_FRONTEND"},{meta:{id:"67072",name:"Visionwood",description:"",lastUpdated:"2025-04-26T05:48:34",initialProductId:"67072"},products:[{meta:{id:"67072",name:"Visionwood",description:"",lastUpdated:"2025-04-26T05:48:34",attributes:{hasWidth:!1,hasHeight:!1,hasQuantity:!1,optionSyncPassthrough:!0,measurementSystem:"METRIC"}},pricing:{mode:{type:"FREE"}},options:[{legacyId:"1d2f0d34-dd29-49ab-881d-a8393e0829b6",id:"1d2f0d34-dd29-49ab-881d-a8393e0829b6",name:"Finish",sortOrder:0,type:"SELECT_SINGLE",meta:"finish",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"0815beaa-6dcd-4f0c-bc61-413603ffee2d",id:"0815beaa-6dcd-4f0c-bc61-413603ffee2d",sortOrder:0,name:"finish--visionwood",manufacturerKey:"FINISH--VISIONWOOD",hasQuantity:!1,meta:"finish--visionwood"}],defaultId:null,calculationKey:"O_FINISH",manufacturerKey:"O_FINISH",required:!0},{legacyId:"f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",id:"f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",name:"Type",sortOrder:0,type:"SELECT_SINGLE",meta:"fabric",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649084",id:"64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c",sortOrder:0,name:"50mm Visionwood",manufacturerKey:"50mm Visionwood",hasQuantity:!1,meta:"fabric-blinds--50mm-visionwood"},{legacyId:"8649092",id:"2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9",sortOrder:1,name:"63mm Visionwood",manufacturerKey:"63mm Visionwood",hasQuantity:!1,meta:"fabric-blinds--63mm-visionwood"}],defaultId:"64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c",calculationKey:"O_FABRIC",manufacturerKey:"O_FABRIC",required:!0}],initialValues:[{type:"MEASUREMENT",key:"WINDOW_WIDTH",unit:"MM",minimum:0,maximum:null,step:1},{type:"MEASUREMENT",key:"WINDOW_HEIGHT",unit:"MM",minimum:0,maximum:null,step:1}],initModel(e){e.hideSelectFieldOption("f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",["64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c","2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9"])},rules:[{id:"d191fea1-8bb5-4994-b9a0-69a6be00b276",name:"",evaluateConditions:e=>e.anyOptionSelected("1d2f0d34-dd29-49ab-881d-a8393e0829b6",["0815beaa-6dcd-4f0c-bc61-413603ffee2d"]),actionOnTrue(e){e.setVariableValue("FINISH_CATEGORY","finish--visionwood"),e.showSelectFieldOption("f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",["64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c","2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9"])}},{id:"6d03bb37-e829-4d3a-ab3b-4813482f54a2",name:"",evaluateConditions:e=>e.anyOptionSelected("f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",["64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c"]),actionOnTrue(e){var t;e.loadSubProduct({productId:"67069",initialValues:{},variables:{MOUNT_POSITION:null!==(t=e.getVariableByName("MOUNT_POSITION"))&&void 0!==t?t:"PRIMARY"},optionValues:{"e4ba906b-3ede-4971-bb04-9774919fd5b6":"64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c"}})}},{id:"397df114-0383-46f0-85fe-573c05c663d1",name:"",evaluateConditions:e=>e.anyOptionSelected("f5a3e8fa-b4df-42dc-88c3-bfc4edec7f95",["2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9"]),actionOnTrue(e){var t;e.loadSubProduct({productId:"67070",initialValues:{},variables:{MOUNT_POSITION:null!==(t=e.getVariableByName("MOUNT_POSITION"))&&void 0!==t?t:"PRIMARY"},optionValues:{"9c0de922-fa14-4c34-aed8-7bcfba90557a":"2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9"}})}}],variables:[{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"ENUM",name:"MOUNT_POSITION",values:["PRIMARY","SECONDARY"],value:"PRIMARY"}],priceGrids:[]},{meta:{id:"67069",name:"Visionwood (50mm)",description:"",lastUpdated:"2025-07-09T12:57:16",attributes:{hasWidth:!0,hasHeight:!0,hasQuantity:!0,optionSyncPassthrough:!1,measurementSystem:"METRIC"}},pricing:{mode:{type:"PRICE_GRID",priceGridId:"67069"}},options:[{legacyId:"1987842",id:"e4ba906b-3ede-4971-bb04-9774919fd5b6",name:"Type",sortOrder:0,type:"SELECT_SINGLE",meta:"fabric",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["API"]},selects:[{legacyId:"8649084",id:"64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c",sortOrder:0,name:"50mm Visionwood",manufacturerKey:"50mm Visionwood",hasQuantity:!1,meta:"fabric-blinds--50mm-visionwood"}],defaultId:"64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c",calculationKey:"TYPE",manufacturerKey:"TYPE",required:!0},{legacyId:"1987824",id:"86495c59-b1b9-4ffe-a8ad-bb0d34060913",name:"Colour",sortOrder:1,type:"SELECT_SINGLE",meta:"fabric-color",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649035",id:"82a7f01e-86e6-467f-b725-8cd986584205",sortOrder:0,name:"Glass",manufacturerKey:"GLASS",hasQuantity:!1,meta:"fabric-blinds--50mm-visionwood--glass"},{legacyId:"8649036",id:"e062130e-9b55-4cfb-ab26-41ce3f4b63af",sortOrder:6,name:"Vivid White",manufacturerKey:"VIVID WHITE",hasQuantity:!1,meta:"fabric-blinds--50mm-visionwood--vivid-white"},{legacyId:"8649038",id:"c2743f5f-15f0-4800-959e-0822a61c0861",sortOrder:8,name:"Stone",manufacturerKey:"STONE",hasQuantity:!1,meta:"fabric-blinds--50mm-visionwood--stone"}],defaultId:null,calculationKey:"Colour",manufacturerKey:"Colour",required:!0},{legacyId:"1987884",id:"cc3ec31d-116f-482c-aadb-6b0aaf175452",name:"Control Type",sortOrder:3,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649196",id:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",sortOrder:0,name:"Cord operated",manufacturerKey:"Cord operated",hasQuantity:!1,meta:null},{legacyId:"8649197",id:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",sortOrder:1,name:"Motor",manufacturerKey:"Motor",hasQuantity:!1,meta:null}],defaultId:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",calculationKey:"Control Type",manufacturerKey:"Control Type",required:!0},{legacyId:"1987885",id:"88ca3ed9-8398-453d-bf8f-9b40334b0dc4",name:"Motor Options",sortOrder:4,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1987886",id:"47d40836-3dee-4434-afbb-325f5c0ddd18",name:"Remote",sortOrder:5,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649198",id:"1373b42f-b146-4f57-afe3-56c9ac332cbb",sortOrder:100,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649199",id:"403b6524-14b8-4ae9-9d52-7259938af161",sortOrder:100,name:"Situo 1 Variation RTS Pure White",manufacturerKey:"Situo 1 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8649200",id:"5b6b6554-f089-43ca-b720-74d9716b9097",sortOrder:100,name:"Situo 1 Variation RTS Silver",manufacturerKey:"Situo 1 Variation RTS Silver",hasQuantity:!1,meta:null},{legacyId:"8649201",id:"a8388155-2ab3-4193-bcf3-91a42bc608c5",sortOrder:100,name:"Situo 5 Variation RTS Pure White",manufacturerKey:"Situo 5 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8649202",id:"b6c473f3-831a-42d2-a169-1749a5a041ed",sortOrder:100,name:"Situo 5 Variation RTS Silver",manufacturerKey:"Situo 5 Variation RTS Silver",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Remote",manufacturerKey:"Remote",required:!1}]},{legacyId:"1987878",id:"d2858d92-02e6-44c9-a566-89bb8a4b9061",name:"Control Side",sortOrder:6,type:"SELECT_SINGLE",meta:"control-side",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649182",id:"cfd2b77b-ff39-4abb-a074-6e54c6c15bd6",sortOrder:0,name:"Left",manufacturerKey:"L",hasQuantity:!1,meta:"control-side--left"},{legacyId:"8649183",id:"1412eefb-a55b-4d7a-85ab-9c861dbdf03d",sortOrder:1,name:"Right",manufacturerKey:"R",hasQuantity:!1,meta:"control-side--right"}],defaultId:null,calculationKey:"Cont Side",manufacturerKey:"Cont Side",required:!0},{legacyId:"1987879",id:"f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",name:"Fitting",sortOrder:7,type:"SELECT_SINGLE",meta:"fitting-type",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649187",id:"dbaad81c-9c61-427e-bf37-dcd278c54f63",sortOrder:0,name:"Face Fit",manufacturerKey:"Face",hasQuantity:!1,meta:"fitting-type--face"},{legacyId:"8649188",id:"a2ded64a-f8a3-4e05-8398-578a43953791",sortOrder:1,name:"Recess Fit",manufacturerKey:"Recess",hasQuantity:!1,meta:"fitting-type--recess"}],defaultId:null,calculationKey:"Fixing",manufacturerKey:"Fixing",required:!0},{legacyId:"1987880",id:"13c962a8-7a63-4a9a-b0f8-47359edd05a1",name:"Hold Down Clips",sortOrder:8,type:"SELECT_SINGLE",meta:"hold-down-clips",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649189",id:"719034c8-f124-4b38-8a9e-91cc5447b50f",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"hold-down-clips--yes"},{legacyId:"8649190",id:"39a1860a-96ad-4c6d-80eb-cd0ae95e2bea",sortOrder:1,name:"No",manufacturerKey:"N/A",hasQuantity:!1,meta:"hold-down-clips--no"}],defaultId:null,calculationKey:"Hold Down Clips",manufacturerKey:"Hold Down Clips",required:!0},{legacyId:"1987881",id:"33e57150-690f-42d1-a722-d46e6fb9c3b1",name:"Privacy Slats",sortOrder:9,type:"SELECT_SINGLE",meta:"slats",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649191",id:"292806b6-6d46-4aef-8e9f-001dba541806",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"slats--privacy"},{legacyId:"8649192",id:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:"slats--corded"}],defaultId:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",calculationKey:"No Holes",manufacturerKey:"No Holes",required:!0},{legacyId:"1987882",id:"6c58b799-c876-4936-9ef9-addbbb54cae0",name:"No Holes Options",sortOrder:10,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1987883",id:"eb41a4a8-05e5-4e60-9dc6-2a3fbdd0443e",name:"Ladder Tape",sortOrder:11,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649193",id:"e69076ed-8351-49a6-9cfb-1c58e83607b4",sortOrder:100,name:"White",manufacturerKey:"White",hasQuantity:!1,meta:null},{legacyId:"8649194",id:"790cc317-f011-4903-9c50-82d3b7c203c2",sortOrder:100,name:"Cream",manufacturerKey:"Cream",hasQuantity:!1,meta:null},{legacyId:"8649195",id:"dd472555-0bff-4c0e-95c8-57da09d8bb96",sortOrder:100,name:"Mid Brown",manufacturerKey:"Mid Brown",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Ladder Tape",manufacturerKey:"Ladder Tape",required:!1}]},{legacyId:"1987888",id:"f3985881-1150-4343-a425-e4b20986573d",name:"Woven Tape",sortOrder:12,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649204",id:"1b5bcd7e-d2ab-4c89-a1a0-b2d8c0a04839",sortOrder:0,name:"16mm Woven Tape",manufacturerKey:"16mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8649205",id:"490a9be6-d37b-43b0-bf19-b378765bd4ed",sortOrder:1,name:"25mm Woven Tape",manufacturerKey:"25mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8728979",id:"3388a086-3bda-4678-8254-42069980a51c",sortOrder:2,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null}],defaultId:"490a9be6-d37b-43b0-bf19-b378765bd4ed",calculationKey:"Woven tape",manufacturerKey:"Woven tape",required:!1},{legacyId:"1987877",id:"f625bcde-8533-472c-ae0b-ae9bec5c3396",name:"Control Length",sortOrder:13,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649173",id:"3ef57438-78f1-4800-8b71-1b24f06bbf30",sortOrder:100,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null},{legacyId:"8649174",id:"5b59fb62-6dee-46fc-980c-87d1fa58baa7",sortOrder:100,name:"500mm",manufacturerKey:"500",hasQuantity:!1,meta:null},{legacyId:"8649175",id:"a9f34433-dd24-4595-a699-18c68e620ecd",sortOrder:100,name:"750mm",manufacturerKey:"750",hasQuantity:!1,meta:null},{legacyId:"8649176",id:"ea14eb90-250d-4d2d-b710-1132c2765af7",sortOrder:100,name:"1000mm",manufacturerKey:"1000",hasQuantity:!1,meta:null},{legacyId:"8649177",id:"cbc255a8-abc3-47ba-a580-cc0e465b2fa9",sortOrder:100,name:"1250mm",manufacturerKey:"1250",hasQuantity:!1,meta:null},{legacyId:"8649178",id:"7b705562-6c23-41f3-9a7c-99e78894fd7d",sortOrder:100,name:"1500mm",manufacturerKey:"1500",hasQuantity:!1,meta:null},{legacyId:"8649179",id:"788f91db-e7d8-43d6-9e44-3301a37c42df",sortOrder:100,name:"1750mm",manufacturerKey:"1750",hasQuantity:!1,meta:null},{legacyId:"8649180",id:"7357f69d-f240-4788-ba61-337f7c2f4df4",sortOrder:100,name:"2000mm",manufacturerKey:"2000",hasQuantity:!1,meta:null},{legacyId:"8649181",id:"c01fb4b1-fc2c-4b80-b970-0eff576121af",sortOrder:100,name:"2250mm",manufacturerKey:"2250",hasQuantity:!1,meta:null}],defaultId:"3ef57438-78f1-4800-8b71-1b24f06bbf30",calculationKey:"Control Length",manufacturerKey:"Control Length",required:!0},{legacyId:"1987887",id:"5b642efb-dbb4-4338-b7d3-dc03fa887cb2",name:"Fascia",sortOrder:14,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649203",id:"6134d18e-dc5a-4b60-bc08-168df75f2301",sortOrder:0,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null}],defaultId:"6134d18e-dc5a-4b60-bc08-168df75f2301",calculationKey:"Fascia",manufacturerKey:"Fascia",required:!0},{legacyId:"1987889",id:"6e76e530-19b7-42b5-a8c1-3c26d251082a",name:"Acorn",sortOrder:15,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649206",id:"75e088f2-b1c2-4f90-b475-b75b84019e86",sortOrder:0,name:"Chrome",manufacturerKey:"Chrome",hasQuantity:!1,meta:null},{legacyId:"8649207",id:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649208",id:"ac452f38-77b0-4945-941e-7c0e79fc3738",sortOrder:2,name:"Timber",manufacturerKey:"Timber",hasQuantity:!1,meta:null}],defaultId:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",calculationKey:"Acorn",manufacturerKey:"Acorn",required:!1},{legacyId:"1987890",id:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",name:"Cut Outs",sortOrder:16,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649209",id:"915389bf-dc88-45ba-8767-9386a7ad2a2f",sortOrder:0,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649210",id:"3f46446d-5e47-4d4a-b68e-778ce668adf8",sortOrder:1,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:null}],defaultId:"915389bf-dc88-45ba-8767-9386a7ad2a2f",calculationKey:"Cut-out",manufacturerKey:"Cut-out",required:!1},{legacyId:"1987825",id:"b55b6f5a-a637-48cf-a85c-60cf14b58f0e",name:"Extras and Notes",sortOrder:17,type:"TEXT",meta:null,audienceVisibility:{visibleTo:[],hiddenFrom:["ALL"]},default:null,multiline:!0,hasPrice:!1,maxLength:1024,calculationKey:"orderDescription",manufacturerKey:"orderDescription",required:!1}],initialValues:[{type:"MEASUREMENT",key:"WINDOW_WIDTH",unit:"MM",minimum:0,maximum:null,step:1},{type:"MEASUREMENT",key:"WINDOW_HEIGHT",unit:"MM",minimum:0,maximum:null,step:1}],initModel(e){e.setVariableValue("PRODUCT_WIDTH",e.getVariableByName("WINDOW_WIDTH")),e.setVariableValue("PRODUCT_HEIGHT",e.getVariableByName("WINDOW_HEIGHT")),180>e.getVariableByName("WINDOW_HEIGHT")&&150>e.getVariableByName("WINDOW_WIDTH")&&e.anyOptionSelected("e4ba906b-3ede-4971-bb04-9774919fd5b6",["64c8d9bc-a4d5-4a00-bdbe-12ed4fac8c4c"])&&e.addOptionMessage("e4ba906b-3ede-4971-bb04-9774919fd5b6","ERROR","Minimum size requirement not met for Type 50mm Visionwood"),e.hideOption("6e76e530-19b7-42b5-a8c1-3c26d251082a"),e.removeOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.removeOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.hideOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.hideOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.setOptionReadOnly("f3985881-1150-4343-a425-e4b20986573d",!1),e.hideOption("e4ba906b-3ede-4971-bb04-9774919fd5b6")},rules:[{id:"bf503192-a9c3-4d76-9cad-1edeefaac7f3",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"],!0),actionOnTrue(e){e.showOption("6c58b799-c876-4936-9ef9-addbbb54cae0")}},{id:"2101afed-5891-450b-839f-35273d2d2035",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"],!0),actionOnTrue(e){e.showOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4")}},{id:"2346483",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.hideOption("f3985881-1150-4343-a425-e4b20986573d")}},{id:"2346485",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"])}},{id:"2346486",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["deabaf48-815a-44c2-8ae6-636f7d2ebd25"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["3388a086-3bda-4678-8254-42069980a51c"])}},{id:"2346488",name:"",evaluateConditions:e=>e.anyOptionSelected("f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",["a2ded64a-f8a3-4e05-8398-578a43953791"]),actionOnTrue(e){e.addMessage("INFO","Headrail to be same size as slats")}},{id:"eb91f233-746b-49e3-a29d-3744f7d90b73",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"cc3ec31d-116f-482c-aadb-6b0aaf175452",selectId:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",value:330})}},{id:"20d47bd5-15ad-4be5-adc6-45dd9838bc77",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["403b6524-14b8-4ae9-9d52-7259938af161"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"403b6524-14b8-4ae9-9d52-7259938af161",value:110})}},{id:"4b434337-4d13-44ff-83e7-b778ea0a6abb",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["5b6b6554-f089-43ca-b720-74d9716b9097"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"5b6b6554-f089-43ca-b720-74d9716b9097",value:110})}},{id:"1f593e4e-428b-431d-a125-84b5ef3d5eef",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["a8388155-2ab3-4193-bcf3-91a42bc608c5"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"a8388155-2ab3-4193-bcf3-91a42bc608c5",value:142})}},{id:"eec4b126-aa4a-4965-86f0-2ca5f026d896",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["b6c473f3-831a-42d2-a169-1749a5a041ed"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"b6c473f3-831a-42d2-a169-1749a5a041ed",value:142})}},{id:"0df8a9bd-3823-4e21-9e6d-3d5974b54174",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.1})}},{id:"3f64c3d8-9f6f-4450-aff2-058b36e664f1",name:"",evaluateConditions:e=>e.anyOptionSelected("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.15})}},{id:"eec68c6a-bfe6-40a8-8aff-3d12d4987fd8",name:"",evaluateConditions:e=>e.anyOptionSelected("6e76e530-19b7-42b5-a8c1-3c26d251082a",["75e088f2-b1c2-4f90-b475-b75b84019e86"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"6e76e530-19b7-42b5-a8c1-3c26d251082a",selectId:"75e088f2-b1c2-4f90-b475-b75b84019e86",value:20})}},{id:"529ca511-36aa-40ae-b792-8ed9dc54ffdd",name:"",evaluateConditions:e=>e.anyOptionSelected("d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",["3f46446d-5e47-4d4a-b68e-778ce668adf8"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",selectId:"3f46446d-5e47-4d4a-b68e-778ce668adf8",value:15})}},{id:"e9d87b96-ef5c-49c5-b2bc-d57496f9e17c",name:"",evaluateConditions:e=>!0,actionOnTrue(e){e.hideOption("e4ba906b-3ede-4971-bb04-9774919fd5b6")}}],variables:[{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"ENUM",name:"MOUNT_POSITION",values:["PRIMARY","SECONDARY"],value:"PRIMARY"},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MAJOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")/1e6},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MINOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")},{type:"COMPUTED",dataType:"ANY",name:"CUT_WIDTH",calculate:e=>e.getValueByCalculationKey("PRODUCT_WIDTH")-8},{type:"COMPUTED",dataType:"ANY",name:"CUT_DROP",calculate:e=>e.getValueByCalculationKey("PRODUCT_HEIGHT")-8},{type:"SYSTEM",dataType:"STRING",name:"FINISH_CATEGORY"}],priceGrids:[{id:"67069",xVariable:"WINDOW_WIDTH",xSpacings:[600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400],yVariable:"WINDOW_HEIGHT",ySpacings:[600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400,2500,2600],values:[[136,145,157,164,168,182,186,191,201,213,218,224,233,238,242,255,262,270,273],[141,147,160,168,175,186,191,198,209,221,227,229,242,252,255,268,270,281,289],[145,150,168,175,180,191,198,205,218,227,233,238,255,259,265,276,285,297,303],[147,153,173,180,186,198,205,213,224,235,242,252,262,268,273,289,297,307,313],[150,157,175,182,191,201,213,221,233,242,252,259,270,276,289,299,311,318,325],[153,160,182,188,193,209,221,227,238,252,262,268,281,289,299,313,318,332,340],[157,164,186,191,201,218,224,233,246,262,268,276,291,299,311,322,332,345,353],[160,168,188,198,205,224,229,238,255,268,276,285,303,311,318,332,345,358,365],[164,175,191,201,213,227,235,246,265,273,285,297,313,318,330,348,353,367,379],[168,180,198,209,218,233,242,255,270,285,297,306,318,330,340,358,367,381,393],[173,182,201,213,224,238,252,262,276,291,303,313,330,340,351,367,379,393,402],[175,186,205,218,227,246,259,268,285,303,313,322,340,351,360,381,393,406,417],[180,188,209,224,233,252,265,273,291,311,318,330,351,360,371,393,402,420,430],[182,191,218,227,238,259,270,281,303,316,330,340,360,371,385,402,417,430,444],[185,193,221,233,242,265,276,289,311,325,338,351,371,381,396,412,428,444,455],[186,198,224,235,252,270,281,297,316,332,348,358,379,393,406,428,436,455,468],[188,201,229,238,255,273,289,303,322,340,353,367,387,402,417,436,450,468,482],[191,205,233,246,262,281,297,311,332,351,365,379,400,412,428,448,462,482,495],[193,209,235,252,265,289,303,316,340,358,369,385,408,423,436,462,476,492,507],[198,213,238,259,270,297,311,322,348,365,381,396,420,433,448,472,486,506,519],[201,221,246,262,273,299,316,330,353,375,387,406,430,444,458,482,498,518,535]]}]},{meta:{id:"67070",name:"Visionwood (63mm)",description:"",lastUpdated:"2025-07-09T12:57:41",attributes:{hasWidth:!0,hasHeight:!0,hasQuantity:!0,optionSyncPassthrough:!1,measurementSystem:"METRIC"}},pricing:{mode:{type:"PRICE_GRID",priceGridId:"67070"}},options:[{legacyId:"1987845",id:"9c0de922-fa14-4c34-aed8-7bcfba90557a",name:"Type",sortOrder:0,type:"SELECT_SINGLE",meta:"fabric",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["API"]},selects:[{legacyId:"8649092",id:"2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9",sortOrder:0,name:"63mm Visionwood",manufacturerKey:"63mm Visionwood",hasQuantity:!1,meta:"fabric-blinds--63mm-visionwood"}],defaultId:"2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9",calculationKey:"TYPE",manufacturerKey:"TYPE",required:!0},{legacyId:"1987844",id:"854b8d3e-f870-458e-b761-f439d7679474",name:"Colour",sortOrder:1,type:"SELECT_SINGLE",meta:"fabric-color",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649085",id:"d4dd1ee6-4db6-4f3a-9895-975fa5bb2e8d",sortOrder:0,name:"Glass",manufacturerKey:"GLASS",hasQuantity:!1,meta:"fabric-blinds--63mm-visionwood--glass"},{legacyId:"8649086",id:"ecf28e3b-19fc-49b6-a5a5-47ca01bd4654",sortOrder:5,name:"Stone",manufacturerKey:"STONE",hasQuantity:!1,meta:"fabric-blinds--63mm-visionwood--stone"},{legacyId:"8649087",id:"45cc5e9b-9942-4ced-8770-0da5c50ac4d5",sortOrder:6,name:"Vivid White",manufacturerKey:"VIVID WHITE",hasQuantity:!1,meta:"fabric-blinds--63mm-visionwood--vivid-white"}],defaultId:null,calculationKey:"Colour",manufacturerKey:"Colour",required:!0},{legacyId:"1987899",id:"cc3ec31d-116f-482c-aadb-6b0aaf175452",name:"Control Type",sortOrder:3,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649236",id:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",sortOrder:0,name:"Cord operated",manufacturerKey:"Cord operated",hasQuantity:!1,meta:null},{legacyId:"8649237",id:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",sortOrder:1,name:"Motor",manufacturerKey:"Motor",hasQuantity:!1,meta:null}],defaultId:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",calculationKey:"Control Type",manufacturerKey:"Control Type",required:!0},{legacyId:"1987900",id:"88ca3ed9-8398-453d-bf8f-9b40334b0dc4",name:"Motor Options",sortOrder:4,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1987901",id:"47d40836-3dee-4434-afbb-325f5c0ddd18",name:"Remote",sortOrder:5,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649238",id:"1373b42f-b146-4f57-afe3-56c9ac332cbb",sortOrder:100,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649239",id:"403b6524-14b8-4ae9-9d52-7259938af161",sortOrder:100,name:"Situo 1 Variation RTS Pure White",manufacturerKey:"Situo 1 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8649240",id:"5b6b6554-f089-43ca-b720-74d9716b9097",sortOrder:100,name:"Situo 1 Variation RTS Silver",manufacturerKey:"Situo 1 Variation RTS Silver",hasQuantity:!1,meta:null},{legacyId:"8649241",id:"a8388155-2ab3-4193-bcf3-91a42bc608c5",sortOrder:100,name:"Situo 5 Variation RTS Pure White",manufacturerKey:"Situo 5 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8649242",id:"b6c473f3-831a-42d2-a169-1749a5a041ed",sortOrder:100,name:"Situo 5 Variation RTS Silver",manufacturerKey:"Situo 5 Variation RTS Silver",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Remote",manufacturerKey:"Remote",required:!1}]},{legacyId:"1987893",id:"d2858d92-02e6-44c9-a566-89bb8a4b9061",name:"Control Side",sortOrder:6,type:"SELECT_SINGLE",meta:"control-side",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649222",id:"cfd2b77b-ff39-4abb-a074-6e54c6c15bd6",sortOrder:0,name:"Left",manufacturerKey:"L",hasQuantity:!1,meta:"control-side--left"},{legacyId:"8649223",id:"1412eefb-a55b-4d7a-85ab-9c861dbdf03d",sortOrder:1,name:"Right",manufacturerKey:"R",hasQuantity:!1,meta:"control-side--right"}],defaultId:null,calculationKey:"Cont Side",manufacturerKey:"Cont Side",required:!0},{legacyId:"1987894",id:"f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",name:"Fitting",sortOrder:7,type:"SELECT_SINGLE",meta:"fitting-type",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649227",id:"dbaad81c-9c61-427e-bf37-dcd278c54f63",sortOrder:0,name:"Face Fit",manufacturerKey:"Face",hasQuantity:!1,meta:"fitting-type--face"},{legacyId:"8649228",id:"a2ded64a-f8a3-4e05-8398-578a43953791",sortOrder:1,name:"Recess Fit",manufacturerKey:"Recess",hasQuantity:!1,meta:"fitting-type--recess"}],defaultId:null,calculationKey:"Fixing",manufacturerKey:"Fixing",required:!0},{legacyId:"1987895",id:"13c962a8-7a63-4a9a-b0f8-47359edd05a1",name:"Hold Down Clips",sortOrder:8,type:"SELECT_SINGLE",meta:"hold-down-clips",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649229",id:"719034c8-f124-4b38-8a9e-91cc5447b50f",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"hold-down-clips--yes"},{legacyId:"8649230",id:"39a1860a-96ad-4c6d-80eb-cd0ae95e2bea",sortOrder:1,name:"No",manufacturerKey:"N/A",hasQuantity:!1,meta:"hold-down-clips--no"}],defaultId:null,calculationKey:"Hold Down Clips",manufacturerKey:"Hold Down Clips",required:!0},{legacyId:"1987896",id:"33e57150-690f-42d1-a722-d46e6fb9c3b1",name:"Privacy Slats",sortOrder:9,type:"SELECT_SINGLE",meta:"slats",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8649231",id:"292806b6-6d46-4aef-8e9f-001dba541806",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"slats--privacy"},{legacyId:"8649232",id:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:"slats--corded"}],defaultId:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",calculationKey:"No Holes",manufacturerKey:"No Holes",required:!0},{legacyId:"1987897",id:"6c58b799-c876-4936-9ef9-addbbb54cae0",name:"No Holes Options",sortOrder:10,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1987898",id:"eb41a4a8-05e5-4e60-9dc6-2a3fbdd0443e",name:"Ladder Tape",sortOrder:11,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649233",id:"e69076ed-8351-49a6-9cfb-1c58e83607b4",sortOrder:100,name:"White",manufacturerKey:"White",hasQuantity:!1,meta:null},{legacyId:"8649234",id:"790cc317-f011-4903-9c50-82d3b7c203c2",sortOrder:100,name:"Cream",manufacturerKey:"Cream",hasQuantity:!1,meta:null},{legacyId:"8649235",id:"dd472555-0bff-4c0e-95c8-57da09d8bb96",sortOrder:100,name:"Mid Brown",manufacturerKey:"Mid Brown",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Ladder Tape",manufacturerKey:"Ladder Tape",required:!1}]},{legacyId:"1987903",id:"f3985881-1150-4343-a425-e4b20986573d",name:"Woven Tape",sortOrder:12,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649244",id:"1b5bcd7e-d2ab-4c89-a1a0-b2d8c0a04839",sortOrder:0,name:"16mm Woven Tape",manufacturerKey:"16mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8649245",id:"490a9be6-d37b-43b0-bf19-b378765bd4ed",sortOrder:1,name:"25mm Woven Tape",manufacturerKey:"25mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8728980",id:"3388a086-3bda-4678-8254-42069980a51c",sortOrder:2,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null}],defaultId:"490a9be6-d37b-43b0-bf19-b378765bd4ed",calculationKey:"Woven tape",manufacturerKey:"Woven tape",required:!1},{legacyId:"1987892",id:"f625bcde-8533-472c-ae0b-ae9bec5c3396",name:"Control Length",sortOrder:13,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649213",id:"3ef57438-78f1-4800-8b71-1b24f06bbf30",sortOrder:100,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null},{legacyId:"8649214",id:"5b59fb62-6dee-46fc-980c-87d1fa58baa7",sortOrder:100,name:"500mm",manufacturerKey:"500",hasQuantity:!1,meta:null},{legacyId:"8649215",id:"a9f34433-dd24-4595-a699-18c68e620ecd",sortOrder:100,name:"750mm",manufacturerKey:"750",hasQuantity:!1,meta:null},{legacyId:"8649216",id:"ea14eb90-250d-4d2d-b710-1132c2765af7",sortOrder:100,name:"1000mm",manufacturerKey:"1000",hasQuantity:!1,meta:null},{legacyId:"8649217",id:"cbc255a8-abc3-47ba-a580-cc0e465b2fa9",sortOrder:100,name:"1250mm",manufacturerKey:"1250",hasQuantity:!1,meta:null},{legacyId:"8649218",id:"7b705562-6c23-41f3-9a7c-99e78894fd7d",sortOrder:100,name:"1500mm",manufacturerKey:"1500",hasQuantity:!1,meta:null},{legacyId:"8649219",id:"788f91db-e7d8-43d6-9e44-3301a37c42df",sortOrder:100,name:"1750mm",manufacturerKey:"1750",hasQuantity:!1,meta:null},{legacyId:"8649220",id:"7357f69d-f240-4788-ba61-337f7c2f4df4",sortOrder:100,name:"2000mm",manufacturerKey:"2000",hasQuantity:!1,meta:null},{legacyId:"8649221",id:"c01fb4b1-fc2c-4b80-b970-0eff576121af",sortOrder:100,name:"2250mm",manufacturerKey:"2250",hasQuantity:!1,meta:null}],defaultId:"3ef57438-78f1-4800-8b71-1b24f06bbf30",calculationKey:"Control Length",manufacturerKey:"Control Length",required:!0},{legacyId:"1987902",id:"5b642efb-dbb4-4338-b7d3-dc03fa887cb2",name:"Fascia",sortOrder:14,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649243",id:"6134d18e-dc5a-4b60-bc08-168df75f2301",sortOrder:0,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null}],defaultId:"6134d18e-dc5a-4b60-bc08-168df75f2301",calculationKey:"Fascia",manufacturerKey:"Fascia",required:!0},{legacyId:"1987904",id:"6e76e530-19b7-42b5-a8c1-3c26d251082a",name:"Acorn",sortOrder:15,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649246",id:"75e088f2-b1c2-4f90-b475-b75b84019e86",sortOrder:0,name:"Chrome",manufacturerKey:"Chrome",hasQuantity:!1,meta:null},{legacyId:"8649247",id:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649248",id:"ac452f38-77b0-4945-941e-7c0e79fc3738",sortOrder:2,name:"Timber",manufacturerKey:"Timber",hasQuantity:!1,meta:null}],defaultId:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",calculationKey:"Acorn",manufacturerKey:"Acorn",required:!1},{legacyId:"1987905",id:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",name:"Cut Outs",sortOrder:16,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8649249",id:"915389bf-dc88-45ba-8767-9386a7ad2a2f",sortOrder:0,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8649250",id:"3f46446d-5e47-4d4a-b68e-778ce668adf8",sortOrder:1,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:null}],defaultId:"915389bf-dc88-45ba-8767-9386a7ad2a2f",calculationKey:"Cut-out",manufacturerKey:"Cut-out",required:!1},{legacyId:"1987843",id:"55570ac5-20fb-4147-99e0-f4da808c6db1",name:"Extras and Notes",sortOrder:17,type:"TEXT",meta:null,audienceVisibility:{visibleTo:[],hiddenFrom:["ALL"]},default:null,multiline:!0,hasPrice:!1,maxLength:1024,calculationKey:"orderDescription",manufacturerKey:"orderDescription",required:!1}],initialValues:[{type:"MEASUREMENT",key:"WINDOW_WIDTH",unit:"MM",minimum:0,maximum:null,step:1},{type:"MEASUREMENT",key:"WINDOW_HEIGHT",unit:"MM",minimum:0,maximum:null,step:1}],initModel(e){e.setVariableValue("PRODUCT_WIDTH",e.getVariableByName("WINDOW_WIDTH")),e.setVariableValue("PRODUCT_HEIGHT",e.getVariableByName("WINDOW_HEIGHT")),180>e.getVariableByName("WINDOW_HEIGHT")&&150>e.getVariableByName("WINDOW_WIDTH")&&e.anyOptionSelected("9c0de922-fa14-4c34-aed8-7bcfba90557a",["2a3ed6dc-5c50-4b4f-8566-ba5f53b440f9"])&&e.addOptionMessage("9c0de922-fa14-4c34-aed8-7bcfba90557a","ERROR","Minimum size requirement not met for Type 63mm Visionwood"),e.hideOption("33e57150-690f-42d1-a722-d46e6fb9c3b1"),e.hideOption("6e76e530-19b7-42b5-a8c1-3c26d251082a"),e.removeOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.removeOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.hideOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.hideOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.setOptionReadOnly("f3985881-1150-4343-a425-e4b20986573d",!1),e.hideOption("9c0de922-fa14-4c34-aed8-7bcfba90557a")},rules:[{id:"500763a5-220d-4a4d-9a03-2c7bcc1d0fa9",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"],!0),actionOnTrue(e){e.showOption("6c58b799-c876-4936-9ef9-addbbb54cae0")}},{id:"7d5e2182-bb67-47ae-8e54-7db62f3282ac",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"],!0),actionOnTrue(e){e.showOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4")}},{id:"2346503",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.hideOption("f3985881-1150-4343-a425-e4b20986573d")}},{id:"2346505",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"])}},{id:"2346507",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["deabaf48-815a-44c2-8ae6-636f7d2ebd25"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["3388a086-3bda-4678-8254-42069980a51c"])}},{id:"2346508",name:"",evaluateConditions:e=>e.anyOptionSelected("f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",["a2ded64a-f8a3-4e05-8398-578a43953791"]),actionOnTrue(e){e.addMessage("INFO","Headrail to be same size as slats")}},{id:"bf349f37-5722-4276-bcdd-6bdb61cd616c",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"cc3ec31d-116f-482c-aadb-6b0aaf175452",selectId:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",value:330})}},{id:"1a8cd4c5-a083-478d-8e21-541e98aa0774",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["403b6524-14b8-4ae9-9d52-7259938af161"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"403b6524-14b8-4ae9-9d52-7259938af161",value:110})}},{id:"cf8c157b-3f8c-43d3-9da3-fe0ddf6f24dc",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["5b6b6554-f089-43ca-b720-74d9716b9097"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"5b6b6554-f089-43ca-b720-74d9716b9097",value:110})}},{id:"f5bf853a-36f2-4e8a-a409-1755a58cefa4",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["a8388155-2ab3-4193-bcf3-91a42bc608c5"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"a8388155-2ab3-4193-bcf3-91a42bc608c5",value:142})}},{id:"a9690d88-cd55-48a0-bc6e-961b916378e0",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["b6c473f3-831a-42d2-a169-1749a5a041ed"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"b6c473f3-831a-42d2-a169-1749a5a041ed",value:142})}},{id:"4e6d6e3d-df30-4e3b-8c72-8bd7e1f60401",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.1})}},{id:"ebb55470-5718-4d95-abe1-6245e6f98025",name:"",evaluateConditions:e=>e.anyOptionSelected("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.15})}},{id:"7945b0cf-1bfa-481f-b874-a521038a59d3",name:"",evaluateConditions:e=>e.anyOptionSelected("6e76e530-19b7-42b5-a8c1-3c26d251082a",["75e088f2-b1c2-4f90-b475-b75b84019e86"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"6e76e530-19b7-42b5-a8c1-3c26d251082a",selectId:"75e088f2-b1c2-4f90-b475-b75b84019e86",value:20})}},{id:"8fc4ae65-2df5-44a3-b88d-0e9b028583ce",name:"",evaluateConditions:e=>e.anyOptionSelected("d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",["3f46446d-5e47-4d4a-b68e-778ce668adf8"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",selectId:"3f46446d-5e47-4d4a-b68e-778ce668adf8",value:15})}},{id:"d6c13050-e40b-40bf-925f-d94e42264450",name:"",evaluateConditions:e=>!0,actionOnTrue(e){e.hideOption("9c0de922-fa14-4c34-aed8-7bcfba90557a")}}],variables:[{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"ENUM",name:"MOUNT_POSITION",values:["PRIMARY","SECONDARY"],value:"PRIMARY"},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MAJOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")/1e6},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MINOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")},{type:"COMPUTED",dataType:"ANY",name:"CUT_WIDTH",calculate:e=>e.getValueByCalculationKey("PRODUCT_WIDTH")-8},{type:"COMPUTED",dataType:"ANY",name:"CUT_DROP",calculate:e=>e.getValueByCalculationKey("PRODUCT_HEIGHT")-10},{type:"SYSTEM",dataType:"STRING",name:"FINISH_CATEGORY"}],priceGrids:[{id:"67070",xVariable:"WINDOW_WIDTH",xSpacings:[600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400],yVariable:"WINDOW_HEIGHT",ySpacings:[600,750,900,1050,1200,1350,1500,1650,1800,1950,2100,2250,2400,2550],values:[[169,174,183,191,197,213,219,224,232,235,240,253,267,270,280,287,290,302,306],[174,183,188,197,206,219,227,235,240,253,259,267,280,290,297,306,312,319,323],[180,188,197,206,219,227,235,246,259,262,270,280,297,306,315,319,330,340,350],[183,191,203,219,227,235,246,259,267,274,287,297,312,319,330,340,350,359,368],[188,197,206,224,235,246,259,267,280,290,302,312,323,340,350,359,368,379,387],[191,206,219,232,240,259,270,280,290,302,312,323,340,354,365,375,387,400,408],[197,213,224,235,253,267,280,290,306,315,323,340,359,368,384,395,408,419,429],[203,219,232,246,262,274,290,302,315,323,340,354,375,387,400,412,423,438,448],[206,224,235,259,270,287,302,315,323,340,354,365,387,403,419,432,444,458,468],[219,232,240,262,274,297,312,323,340,354,368,379,403,419,432,448,463,478,488],[224,235,253,270,287,306,319,335,350,365,379,395,419,438,454,464,482,497,508],[227,240,259,274,297,315,330,346,365,379,395,408,438,454,476,480,501,519,529],[232,246,267,287,306,323,340,359,375,395,408,423,454,469,495,508,520,538,548],[235,259,270,290,312,335,354,368,387,403,423,438,469,486,519,524,538,558,570]]}]}]}),ei={init:()=>et.init(),onFieldUpdate:e=>et.onFieldUpdate(e),order:e=>et.order(e),publish:()=>et.publish(),restore:e=>et.restore(e),initialValueSchema:()=>et.initialValueSchema()};export{ei as default};
//# sourceMappingURL=bundle.js.map