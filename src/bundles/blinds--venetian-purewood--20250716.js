var e,t;(t=e||(e={})).BOOLEAN="BOOLEAN",t.CURRENCY="CURRENCY",t.GROUP="GROUP",t.LABEL="LABEL",t.MEASUREMENT="MEASUREMENT",t.OUTPUT="OUTPUT",t.QUANTITY="QUANTITY",t.SELECT_MULTI="SELECT_MULTI",t.SELECT_SINGLE="SELECT_SINGLE",t.SET="SET",t.TEXT="TEXT";class i{}class a extends i{constructor(){super()}}class n extends i{constructor(){super()}}class r extends i{constructor(){super()}}class s extends i{}class o extends i{constructor(e,t){super(),this.level=e,this.text=t}}class l{constructor(e){this.option=e,this.hidden=!1,this.removed=!1,this.messages=[]}isHidden(){return this.hidden}isRemoved(){return this.removed}handle(e){if(e instanceof a)this.hidden=!0;else if(e instanceof n)this.hidden=!1,this.removed=!1;else if(e instanceof r)this.removed=!0;else if(e instanceof o)this.messages.push({level:e.level,text:e.text});else throw Error(`not a supported mutation: ${typeof e}`)}}class d extends l{isMandatory(){return this.mandatory}reset(){this.mandatory=this.option.required,this.hidden=!1,this.readonly=!1,this.removed=!1}constructor(e){super(e),this.mandatory=!1,this.readonly=!1,this.mandatory=e.required}handle(e){if(e instanceof s){this.mandatory=!0;return}super.handle(e)}}class u{static getNext(){return`${u.id++}`}}u.id=0;class c{constructor(e){this.id=e,this.sortOrder=-1,this.name=null,this.messages=[]}setSortOrder(e){return this.sortOrder=e,this}setName(e){return this.name=e,this}setMeta(e){return this.meta=e,this}setMessages(e){return this.messages=e,this}}class h extends c{constructor(e){super(e),this.mandatory=!1,this.readonly=!1}setMandatory(e){return this.mandatory=e,this}setReadonly(e){return this.readonly=e,this}}class m extends h{constructor(e){super(e),this.currentValue=0,this.minimum=null,this.maximum=null,this.step=null}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.CURRENCY,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step}}}class p extends c{constructor(e,t){super(e),this.fields=t}render(){return{id:this.id,type:e.SET,name:this.name,sortOrder:this.sortOrder,meta:this.meta,fields:this.fields,messages:this.messages}}}class f extends h{constructor(e){super(e),this.multiline=!1,this.currentValue=""}setMultiline(e){return this.multiline=e,this}setCurrentValue(e){return this.currentValue=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.TEXT,multiline:this.multiline,value:this.currentValue,readonly:this.readonly,messages:this.messages}}}class b extends d{getSetters(){return new Map([[this.textFieldId,e=>this.setValue(e)],[this.priceFieldId,e=>this.setPrice(e)]])}constructor(e){var t;super(e),this.textFieldId=u.getNext(),this.priceFieldId=u.getNext(),this.currentValue=null,this.price=null,this.currentValue=null!==(t=e.default)&&void 0!==t?t:""}hasValue(){return null!=this.currentValue&&""!=this.currentValue.trim()}hasValidValue(){var e;return!(this.isMandatory()||this.hasValue())||!((null!==(e=this.currentValue)&&void 0!==e?e:"").length>this.option.maxLength)&&!0}reset(){}clone(){let e=new b(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}setValue(e){this.currentValue=e}getValue(){return this.currentValue}setPrice(e){this.price=e}render(){var e,t;let i=new f(this.textFieldId).setName(this.option.name).setMultiline(this.option.multiline).setMandatory(this.mandatory).setReadonly(this.readonly).setCurrentValue(null!==(t=null!==(e=this.currentValue)&&void 0!==e?e:this.option.default)&&void 0!==t?t:"").setSortOrder(this.option.sortOrder).setMeta(null).render();if(!this.option.hasPrice)return i;let a=new m(this.priceFieldId).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setCurrentValue(this.price).setMinimum(0).setMeta(null).render();return new p(this.option.id,[i,a]).render()}buildDisplayComponent(){var e;return{name:this.option.name,value:null!==(e=this.currentValue)&&void 0!==e?e:"",sortOrder:this.option.sortOrder}}snapshot(){return{id:this.option.id,type:"TEXT",name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue,price:this.price}}restore(e){this.currentValue=e.value,this.option.hasPrice?this.price=e.price:this.price=null}}class y extends i{constructor(e){super(),this.optionSelectIds=e}}class g extends i{constructor(e){super(),this.optionSelectIds=e}}class O extends i{constructor(e){super(),this.optionSelectIds=e}}class S extends i{constructor(e){super(),this.optionSelectIds=e}}class E extends c{constructor(e,t){super(e),this.value=t}render(){return{id:this.id,name:this.value,sortOrder:this.sortOrder,meta:this.meta,type:e.LABEL,messages:this.messages}}}class V extends h{constructor(e){super(e),this.currentValue=null,this.minimum=null,this.maximum=null,this.step=null}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.QUANTITY,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step}}}class I extends c{constructor(e,t){super(e),this.fields=t}render(){return{id:this.id,type:e.GROUP,name:this.name,sortOrder:this.sortOrder,meta:this.meta,fields:this.fields,messages:this.messages}}}class M extends h{constructor(e){super(e),this.currentValues=[],this.options=[],this.minSelected=null,this.maxSelected=null}setOptions(e){return this.options=e,this}setCurrentValue(e){return this.currentValues=e,this}setMinSelectedValue(e){return this.minSelected=e,this}setMaxSelectedValue(e){return this.maxSelected=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.SELECT_MULTI,options:this.options,selectedOptions:this.currentValues,readonly:this.readonly,messages:this.messages,minSelected:this.minSelected,maxSelected:this.maxSelected}}}class v extends i{constructor(e){super(),this.readOnly=e}}class T extends d{constructor(e){super(e),this.selectLookup=new Map,this.currentValue=[],this.hiddenOptionSelects=new Set,this.optionSelectWithQuantityFieldIdLookup=new Map,this.selectFieldId=u.getNext(),this.selects=this.option.selects.map(e=>({id:e.id,name:e.name,sortOrder:e.sortOrder,meta:e.meta})),this.option.selects.forEach(e=>{this.selectLookup.set(e.id,e),this.option.defaultIds.includes(e.id)&&this.currentValue.push(new C(e.id))})}getSetters(){let e=new Map([[this.selectFieldId,e=>this.setValue(e)]]);return this.option.selects.filter(e=>e.hasQuantity).forEach(t=>{let i=u.getNext();this.optionSelectWithQuantityFieldIdLookup.set(t.id,i),e.set(i,e=>this.setSelectOptionQuantity(t.id,e))}),e}getValue(){return this.currentValue}hasValue(){return null!=this.currentValue&&this.currentValue.length>0}hasValidValue(){return!(this.isMandatory()||this.hasValue())||(null==this.option.minSelected||!(this.currentValue.length<this.option.minSelected))&&(null==this.option.maxSelected||!(this.currentValue.length>this.option.maxSelected))&&!0}reset(){super.reset(),this.hiddenOptionSelects=new Set}clone(){let e=new T(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e.hiddenOptionSelects=this.hiddenOptionSelects,e}handle(e){e instanceof y?e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.add(e)):e instanceof g?e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.delete(e)):e instanceof O?(e.optionSelectIds.forEach(t=>{if(this.currentValue.find(e=>e.id===this.selectLookup.get(t).id))return;let i=this.selectLookup.get(t);i.hasQuantity?this.currentValue.push(new N(i.id,null)):this.currentValue.push(new C(this.selectLookup.get(t).id)),this.option.selects.filter(t=>!e.optionSelectIds.includes(t.id)).forEach(e=>this.hiddenOptionSelects.add(e.id))}),this.readonly=!0):e instanceof S?(e.optionSelectIds.forEach(e=>{this.currentValue.push(new C(this.selectLookup.get(e).id))}),this.readonly=!1):e instanceof v?this.readonly=e.readOnly:super.handle(e)}buildDisplayComponent(){let e=this.currentValue.map(e=>{var t,i;return null!==(i=null===(t=this.selectLookup.get(e.id))||void 0===t?void 0:t.name)&&void 0!==i?i:""}).join(", ");return{name:this.option.name,value:e,sortOrder:this.option.sortOrder}}setValue(e){0===e.length&&(this.currentValue=[]);let t=new Map(this.currentValue.map(e=>[e.id,e])),i=[];e.forEach(e=>{let a=t.get(e);if(a)i.push(a);else{let t=this.selectLookup.get(e);if(!t)throw Error("not a valid selection");t.hasQuantity?i.push(new N(t.id,null)):i.push(new C(t.id))}this.currentValue=i})}setSelectOptionQuantity(e,t){let i=this.selectLookup.get(e);if(!i||!i.hasQuantity)throw Error("not a valid selection / cant set a quantity");let a=this.currentValue.find(t=>t.id===e);a?a.quantity=t:this.currentValue.push(new N(e,t))}render(){let e=this.selects.filter(e=>!this.hiddenOptionSelects.has(e.id)),t=this.currentValue.map(t=>e.find(e=>e.id===t.id)),i=this.currentValue.filter(e=>e instanceof N),a=new M(this.selectFieldId).setName(this.option.name).setOptions(e).setCurrentValue(t).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setMeta(this.option.meta).render();if(0===i.length)return a;let n=i.map((e,t)=>{let i=this.optionSelectWithQuantityFieldIdLookup.get(e.id),a=new E(`${i}-LABEL`,this.selectLookup.get(e.id).name).setSortOrder(0).render(),n=new V(i).setMandatory(!0).setReadonly(!1).setSortOrder(1).setCurrentValue(e instanceof N?e.quantity:null).render();return new p(e.id,[a,n]).setSortOrder(t).render()});return new I(this.option.id,[a,...n]).render()}snapshot(){let e=this.currentValue.map(e=>{let t=this.selectLookup.get(e.id);return{id:e.id,legacyId:t.legacyId,manufacturerKey:t.manufacturerKey,name:t.name,hasQuantity:t.hasQuantity,quantity:e instanceof N?e.quantity:null}});return{id:this.option.id,type:"SELECT_MULTI",legacyId:this.option.legacyId,name:this.option.name,values:e}}restore(e){let t=e.values.map(e=>e.id);for(let i=0;i<t.length;i++){let a=this.selectLookup.get(t[i]),n=e.values[i];a.hasQuantity?this.currentValue.push(new N(a.id,n.quantity)):this.currentValue.push(new C(a.id))}}}class C{constructor(e){this.id=e}}class N extends C{constructor(e,t){super(e),this.quantity=t}}class R extends h{constructor(e){super(e),this.currentValue=null,this.options=[]}setOptions(e){return this.options=e,this}setCurrentValue(e){return this.currentValue=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.SELECT_SINGLE,options:this.options,selectedOption:this.currentValue,readonly:this.readonly,messages:this.messages}}}class L extends d{constructor(e){super(e),this.selectFieldId=u.getNext(),this.selectLookup=new Map,this.optionSelectWithQuantityFieldIdLookup=new Map,this.currentValue=null,this.hiddenOptionSelects=new Set,this.selects=this.option.selects.map(e=>({id:e.id,name:e.name,sortOrder:e.sortOrder,meta:e.meta})),this.option.selects.forEach(e=>{this.selectLookup.set(e.id,e),this.option.defaultId==e.id&&(e.hasQuantity?this.currentValue=new N(e.id,null):this.currentValue=new C(e.id))})}getValue(e){return null===this.currentValue||!e&&this.hiddenOptionSelects.has(this.currentValue.id)?null:this.selects.find(e=>e.id===this.currentValue.id)}hasValue(){return null!=this.currentValue}hasValidValue(){return!this.isMandatory()&&this.hasValue(),!0}reset(){super.reset(),this.hiddenOptionSelects=new Set}clone(){let e=new L(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e.hiddenOptionSelects=this.hiddenOptionSelects,e}getSetters(){let e=new Map([[this.selectFieldId,e=>this.setValue(e)]]);return this.option.selects.filter(e=>e.hasQuantity).forEach(t=>{let i=u.getNext();this.optionSelectWithQuantityFieldIdLookup.set(t.id,i),e.set(i,e=>this.setSelectOptionQuantity(t.id,e))}),e}handle(e){if(e instanceof y)e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.add(e));else if(e instanceof g)e.optionSelectIds.forEach(e=>this.hiddenOptionSelects.delete(e));else if(e instanceof O){if(e.optionSelectIds.length>1)throw Error("cant auto select multiple on a single");this.selectLookup.get(e.optionSelectIds[0])&&(this.currentValue=new C(e.optionSelectIds[0]),this.readonly=!0,this.hiddenOptionSelects.clear(),this.option.selects.filter(t=>t.id!=e.optionSelectIds[0]).forEach(e=>this.hiddenOptionSelects.add(e.id)))}else if(e instanceof S){if(e.optionSelectIds.length>1)throw Error("cant auto select multiple on a single");this.selectLookup.get(e.optionSelectIds[0])&&(this.currentValue=new C(e.optionSelectIds[0])),this.readonly=!1}else e instanceof v?this.readonly=e.readOnly:super.handle(e)}buildDisplayComponent(){var e,t;let i="";return this.currentValue&&(i=null!==(t=null===(e=this.selectLookup.get(this.currentValue.id))||void 0===e?void 0:e.name)&&void 0!==t?t:""),{name:this.option.name,value:i,sortOrder:this.option.sortOrder}}setValue(e){if(null===e){this.currentValue=null;return}let t=this.selectLookup.get(e);if(!t)throw Error("not a valid selection");if(null===this.currentValue||this.currentValue.id!==t.id)t.hasQuantity?this.currentValue=new N(t.id,null):this.currentValue=new C(t.id)}setSelectOptionQuantity(e,t){var i;let a=this.selectLookup.get(e);if(!a||!a.hasQuantity)throw Error("not a valid selection / cant set a quantity");(null===(i=this.currentValue)||void 0===i?void 0:i.id)===e?this.currentValue.quantity=t:this.currentValue=new N(e,t)}render(){var e;let t=this.selects.filter(e=>!this.hiddenOptionSelects.has(e.id)),i=null!==(e=t.find(e=>{var t;return e.id===(null===(t=this.currentValue)||void 0===t?void 0:t.id)}))&&void 0!==e?e:null,a=this.currentValue instanceof N,n=new R(this.selectFieldId).setName(this.option.name).setOptions(t).setCurrentValue(i).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setMeta(this.option.meta).render();if(!a)return n;let r=this.optionSelectWithQuantityFieldIdLookup.get(this.currentValue.id),s=new E(`${r}-LABEL`,this.selectLookup.get(this.currentValue.id).name).setSortOrder(0).render(),o=new V(r).setMandatory(!0).setReadonly(!1).setSortOrder(1).setCurrentValue(this.currentValue instanceof N?this.currentValue.quantity:null).render(),l=new p(this.currentValue.id,[s,o]).setSortOrder(this.option.sortOrder+1).render();return new I(this.option.id,[n,l]).render()}snapshot(){var e;let t=null!=this.currentValue&&null!==(e=this.selectLookup.get(this.currentValue.id))&&void 0!==e?e:null,i=t instanceof N?t.quantity:null,a=null;return t&&(a={id:t.id,name:t.name,hasQuantity:t.hasQuantity,manufacturerKey:t.manufacturerKey,legacyId:t.legacyId,quantity:i}),{id:this.option.id,legacyId:this.option.legacyId,type:"SELECT_SINGLE",name:this.option.name,value:a}}restore(e){var t,i,a,n;let r=null===(t=e.value)||void 0===t?void 0:t.id;r&&(this.currentValue=null!==(i=this.selectLookup.get(r))&&void 0!==i?i:null,(null===(a=e.value)||void 0===a?void 0:a.quantity)&&this.currentValue instanceof N&&(this.currentValue=new N(r,null===(n=e.value)||void 0===n?void 0:n.quantity)))}}class w extends h{constructor(e){super(e),this.currentValue=0,this.minimum=null,this.maximum=null,this.step=null,this.unit="MM"}setCurrentValue(e){return this.currentValue=e,this}setMinimum(e){return this.minimum=e,this}setMaximum(e){return this.maximum=e,this}setStep(e){return this.step=e,this}setUnit(e){return this.unit=e,this}render(){return{id:this.id,name:this.name,sortOrder:this.sortOrder,mandatory:this.mandatory,meta:this.meta,type:e.MEASUREMENT,value:this.currentValue,readonly:this.readonly,messages:this.messages,minimum:this.minimum,maximum:this.maximum,step:this.step,unit:this.unit}}}class x extends d{constructor(e){super(e),this.measurementFieldId=u.getNext(),this.currentValue=null,this.currentValue=e.value}reset(){}hasValue(){return null!=this.currentValue}hasValidValue(){return!this.isMandatory()&&this.hasValue(),!0}clone(){let e=new x(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}getSetters(){return new Map([[this.measurementFieldId,e=>this.setValue(e)]])}setValue(e){null!=e?"number"==typeof e?this.currentValue=e:this.currentValue=parseFloat(e):this.currentValue=null}getValue(){return this.currentValue}handle(e){super.handle(e)}buildDisplayComponent(){var e,t;return{name:this.option.name,value:null!==(t=null===(e=this.currentValue)||void 0===e?void 0:e.toFixed(0))&&void 0!==t?t:"0",sortOrder:this.option.sortOrder}}render(){var e;return new w(this.measurementFieldId).setName(this.option.name).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setStep(this.option.step).setMaximum(this.option.maximum).setMinimum(null!==(e=this.option.minimum)&&void 0!==e?e:0).setCurrentValue(this.currentValue).setMeta(this.option.meta).render()}snapshot(){return{type:"MEASUREMENT",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class P extends l{constructor(e){super(e)}clone(){let e=new P(this.option);return e.hidden=this.hidden,e}render(){throw Error("Method not implemented.")}}class F extends i{constructor(e,t){super(),this.min=e,this.max=t}}class U{}class A extends U{constructor(e){super(),this.value=e}}class D{constructor(e){this.config=e}}class W{}class G extends i{constructor(e){super(),this.value=e}}class _ extends U{constructor(e){super(),this.pricingConfig=e}}class K extends U{constructor(e,t,i){super(),this.name=e,this.minimum=t,this.maximum=i}}class k extends U{constructor(e){super(),this.modifier=e}}class H extends U{constructor(e){super(),this.modifier=e}}class Q{constructor(e,t,i){this.productConfig=e,this.modelState=t,this.engine=i,this.ceil=Math.ceil,this.floor=Math.floor,this.round=Math.round}setNumericVariableMinMax(e,t,i){this.modelState.addModelMutation(new K(e,t,i))}overrideMinMaxForOption(e,t,i){this.modelState.addOptionMutation(e,new F(t,i))}selectOptionForceSelect(e,t){this.modelState.addOptionMutation(e,new O(t))}selectOptionDefaultSelect(e,t){this.modelState.addOptionMutation(e,new S(t))}showSelectFieldOption(e,t){this.modelState.addOptionMutation(e,new g(t))}hideSelectFieldOption(e,t){this.modelState.addOptionMutation(e,new y(t))}showOption(e){this.modelState.addOptionMutation(e,new n)}hideOption(e){this.modelState.addOptionMutation(e,new a)}setOptionReadOnly(e,t){this.modelState.addOptionMutation(e,new v(t))}removeOption(e){this.modelState.addOptionMutation(e,new r)}setOptionRequired(e){this.modelState.addOptionMutation(e,new s)}addOptionMessage(e,t,i){this.modelState.addMessage({level:t,text:i}),this.modelState.addOptionMutation(e,new o(t,i))}addOptionPropertyMessage(e,t,i){throw Error("Method not implemented.")}addMessage(e,t){this.modelState.addMessage({level:e,text:t})}updateStringVariable(e,t){this.modelState.setVariableValue(e,t)}optionHasValue(e){return this.modelState.optionHasValue(e)}optionHasValidValue(e){return this.modelState.optionHasValidValue(e)}updateNumericVariable(e,t){this.modelState.setVariableValue(e,t)}updateBooleanVariable(e,t){this.modelState.setVariableValue(e,t)}log(e){console.log(e)}getOptionNumericValue(e){var t;return null!==(t=this.modelState.getOptionValue(e))&&void 0!==t?t:0}getOptionTextValue(e){return this.modelState.getOptionValue(e)}restoreOptionSnapshot(e){this.modelState.restoreOption(e)}snapshotOption(e){return this.modelState.buildOptionSnapshot(e)}getVariableByName(e){return this.modelState.getVariableValue(e)}getPriceGrid(e){return this.modelState.getPriceGridById(e)}getDate(){return Date.now()}anyOptionSelected(e,t,i){let a=this.modelState.getOptionValue(e,i);return!!a&&a.some(e=>t.includes(e.id))}adjustSellPrice(e){this.modelState.addModelMutation(new A(e))}setPricingMode(e){this.modelState.addModelMutation(new _(e))}addBasePriceModifier(e){this.modelState.addModelMutation(new k(e))}addOptionPriceModifier(e){this.modelState.addModelMutation(new H(e))}setDisplayOptionValue(e,t){this.modelState.addOptionMutation(e,new G(t))}setVariableValue(e,t){this.modelState.setVariableValue(e,t)}getValueByCalculationKey(e){return this.modelState.getValueByCalculationKey(e)}getIntervalPartMapping(e,t){var i;return null!==(i=t.find(t=>t[0]<=e))&&void 0!==i?i:t[t.length-1]}loadSubProduct(e){this.modelState.addModelMutation(new D(e))}unloadSubProduct(){this.modelState.addModelMutation(new W)}getSubEngineContext(){return this.engine.getSubEngineExecutionContext()}getInputOptionSnapshot(e){return this.modelState.buildOptionSnapshot(e)}restoreInputOptionSnapshot(e){var t;this.productConfig.meta.attributes.optionSyncPassthrough?null===(t=this.getSubEngineContext())||void 0===t||t.restoreInputOptionSnapshot(e):this.modelState.restoreOption(e)}restoreInputOptionSnapshotIfEmpty(e){var t;this.productConfig.meta.attributes.optionSyncPassthrough?null===(t=this.getSubEngineContext())||void 0===t||t.restoreInputOptionSnapshotIfEmpty(e):!this.modelState.optionHasValidValue(e.id)&&this.modelState.restoreOption(e)}updateVariableMaximumsFromPriceGrid(e){let t=this.modelState.getPriceGridById(e);if(null==t)throw Error(`price grid: ${e} not found`);let i=t.xSpacings[t.xSpacings.length-1];if(this.setNumericVariableMinMax(t.xVariable,null,i),null!=t.yVariable){let e=t.ySpacings[t.ySpacings.length-1];this.setNumericVariableMinMax(t.yVariable,null,e)}}}class B extends l{constructor(e){var t;super(e),this.currentValue=null,this.currentValue=null!==(t=e.value)&&void 0!==t?t:""}clone(){let e=new B(this.option);return e.hidden=this.hidden,e.currentValue=this.currentValue,e}setValue(e){this.currentValue=e}render(){return new E(this.option.id,this.option.value).setSortOrder(this.option.sortOrder).setMeta(null).render()}handle(e){e instanceof G?this.currentValue=e.value:super.handle(e)}snapshot(){return{type:"DISPLAY",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class Y extends d{constructor(e){super(e),this.numberFieldId=u.getNext(),this.currentValue=null,this.currentValue=e.value}clone(){let e=new Y(this.option);return e.hidden=this.hidden,e.readonly=this.readonly,e.mandatory=this.mandatory,e.currentValue=this.currentValue,e}reset(){}hasValue(){return null!=this.currentValue}hasValidValue(){var e,t;if(!this.isMandatory()&&!this.hasValue())return!0;let i=null!==(e=this.currentValue)&&void 0!==e?e:0;return(null==this.option.minimum||!(i<this.option.minimum))&&(null==this.option.maximum||!(i>this.option.maximum))&&(null==this.option.step||(i-(null!==(t=this.option.minimum)&&void 0!==t?t:0))%this.option.step==0)&&!0}getSetters(){return new Map([[this.numberFieldId,e=>this.setValue(e)]])}setValue(e){this.currentValue=e}getValue(){return this.currentValue}handle(e){super.handle(e)}buildDisplayComponent(){var e,t;return{name:this.option.name,value:null!==(t=null===(e=this.currentValue)||void 0===e?void 0:e.toFixed(0))&&void 0!==t?t:"0",sortOrder:this.option.sortOrder}}render(){return new V(this.numberFieldId).setName(this.option.name).setMandatory(this.mandatory).setReadonly(this.readonly).setSortOrder(this.option.sortOrder).setStep(this.option.step).setMaximum(this.option.maximum).setMinimum(this.option.minimum).setCurrentValue(this.currentValue).setMeta(null).render()}snapshot(){return{type:"NUMERIC",id:this.option.id,name:this.option.name,legacyId:this.option.legacyId,value:this.currentValue}}restore(e){this.currentValue=e.value}}class q{constructor(e,t,i){this.productConfig=e,this.environment=t,this.initialValues=i,this.optionState=new Map,this.optionParentLookup=new Map,this.variableLookup=new Map,this.priceGridLookup=new Map,this.optionLookup=new Map,this.modelMutations=[],this.basePriceModifiers=[],this.optionPriceModifiers=[],this.messages=[],this.subProductConfig=null,this.pricingConfigOverride=null,e.priceGrids.forEach(e=>this.priceGridLookup.set(e.id,e)),this.buildOptionLookup(e.options,null),e.variables.forEach(e=>{this.variableLookup.set(e.name,Object.assign({},e))}),this.buildOptionState(),this.optionByCalculationKeyLookup=this.buildOptionByCalculationKeyLookup(),this.fieldStateSetters=this.getSetters(),this.setInitialValues(),this.setInitialValues()}getProductId(){return this.productConfig.meta.id}setInitialValues(){var e;if(this.initialValues){let t=Object.keys(this.initialValues);if(0===t.length)return;let i=null!==(e=this.productConfig.initialValues)&&void 0!==e?e:[];for(let e of t){let t=i.find(t=>t.key===e);if(!t)throw Error(`no initial value schema found ${e}`);let a=this.variableLookup.get(t.key);if(!a||"SYSTEM"!==a.type)throw Error(`no variable found for initial value schema ${e}`);let n=this.initialValues[e];void 0!==n&&this.setVariableValue(a.name,n)}}}getSetters(){let e=new Map;return this.optionState.forEach(t=>{t instanceof d&&t.getSetters().forEach((t,i)=>{e.set(i,t)})}),e}resetForEvaluation(){this.messages=[],this.modelMutations=[],this.basePriceModifiers=[],this.optionPriceModifiers=[],this.subProductConfig=null,this.pricingConfigOverride=null,this.setInitialValues(),this.optionState.forEach(e=>{e instanceof d&&e.reset()});let e=this.productConfig.variables.filter(e=>"SYSTEM"===e.type&&"NUMERIC"===e.dataType);if(this.variableLookup.forEach(t=>{if("SYSTEM"!=t.type||"NUMERIC"!==t.dataType)return;let i=e.find(e=>e.name===t.name);if(!!i)t.maximum=i.maximum,t.minimum=i.minimum}),"PRICE_GRID"==this.productConfig.pricing.mode.type){let e=this.priceGridLookup.get(this.productConfig.pricing.mode.priceGridId);this.setMaximumMinFromPriceGrid(e)}}buildOptionLookup(e,t){e.forEach(e=>{this.optionLookup.set(e.id,e),t&&this.optionParentLookup.set(e.id,t),"GROUP"===e.type&&this.buildOptionLookup(e.subOptions,e.id)})}buildOptionByCalculationKeyLookup(){let e=new Map;for(let t of this.optionState.values()){if(!t.option.calculationKey)continue;let i=e.get(t.option.calculationKey);!i&&(i=[],e.set(t.option.calculationKey,i)),i.push(t)}return e}buildOptionState(){this.optionLookup.forEach(e=>{switch(e.type){case"TEXT":this.optionState.set(e.id,new b(e));break;case"DISPLAY":this.optionState.set(e.id,new B(e));break;case"SELECT_SINGLE":this.optionState.set(e.id,new L(e));break;case"SELECT_MULTI":this.optionState.set(e.id,new T(e));break;case"MEASUREMENT":this.optionState.set(e.id,new x(e));break;case"NUMERIC":this.optionState.set(e.id,new Y(e));break;case"GROUP":this.optionState.set(e.id,new P(e))}})}hasField(e){return this.fieldStateSetters.has(e)}getOptionValue(e,t){let i=this.optionState.get(e);if(!t&&this.optionIsRemoved(e))return null;if(i instanceof L){let e=i.getValue(t);if(e)return[e]}else if(i instanceof T)return i.getValue();else if(i instanceof x)return i.getValue();return null}renderOption(e){let t=this.optionState.get(e);if(t)return this.isOptionVisible(e)?t.render():null;throw Error("no option found")}getVariableValue(e){let t=this.variableLookup.get(e);if(!t)throw Error(`no variable found \`${e}\``);switch(t.type){case"USER":case"SYSTEM":return t.value;case"COMPUTED":return t.calculate(new Q(this.productConfig,this,null));default:throw Error("unknown variable type")}}getNumericVariable(e){return this.variableLookup.get(e)}optionHasValue(e){let t=this.optionState.get(e);return!!t&&t instanceof d&&t.hasValue()}optionHasValidValue(e){let t=this.optionState.get(e);return!!t&&t instanceof d&&t.hasValidValue()}setVariableValue(e,t){let i=this.variableLookup.get(e);if(i){if("USER"===i.type||"SYSTEM"===i.type)switch(i.dataType){case"STRING":i.value=t;break;case"NUMERIC":"number"!=typeof t&&(t=parseFloat(t)),i.value=t;break;case"BOOLEAN":i.value=!!t;break;case"ENUM":if(-1===i.values.indexOf(t))throw Error(`invalid value ${t} for enum ${i.name}`);i.value=t;break;case"ANY":i.value=t}else throw Error(`cannot set value ${t} for variable ${e} of type ${i.type}`)}else{let i={name:e,type:"USER",dataType:"ANY",value:t};this.variableLookup.set(e,i)}}getValueByCalculationKey(e){if(this.variableLookup.has(e))return this.getVariableValue(e);let t=this.optionByCalculationKeyLookup.get(e);if(!t)return;let i=t[0];if(t.length>1){let a=t.filter(e=>!this.optionIsRemoved(e.option.id));if(a.length>1)throw Error(`multiple options not marked as removed found for key: ${e}`);if(0===a.length)return;i=a[0]}switch(i.option.type){case"SELECT_MULTI":let a=i;return a.getValue().map(e=>e.id).map(e=>a.option.selects.find(t=>t.id===e).manufacturerKey);case"SELECT_SINGLE":let n=i,r=n.getValue();if(r)return n.option.selects.find(e=>e.id===(null==r?void 0:r.id)).manufacturerKey;return null;case"MEASUREMENT":case"NUMERIC":case"TEXT":return i.getValue()}}setTextFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setNumericFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setBooleanFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setSingleSelectFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}setMultiSelectFieldValue(e,t){let i=this.fieldStateSetters.get(e);null==i||i.call(i,t)}getPriceGridById(e){return this.priceGridLookup.get(e)}addMessage(e){this.messages.push(e)}getMessages(){return this.messages}addOptionMutation(e,t){this.optionState.get(e).handle(t)}addModelMutation(e){if(e instanceof D)this.subProductConfig=e.config;else if(e instanceof W)this.subProductConfig=null;else if(e instanceof _){if(this.pricingConfigOverride=e.pricingConfig,"PRICE_GRID"==this.pricingConfigOverride.mode.type){let t=e.pricingConfig.mode,i=this.priceGridLookup.get(t.priceGridId);this.setMaximumMinFromPriceGrid(i)}}else if(e instanceof K){let t=this.variableLookup.get(e.name);(null==t?void 0:t.dataType)=="NUMERIC"&&(e.maximum&&(t.maximum=e.maximum),e.minimum&&(t.minimum=e.minimum))}else e instanceof k?this.basePriceModifiers.push(e.modifier):e instanceof H&&this.optionPriceModifiers.push(e.modifier);this.modelMutations.push(e)}setMaximumMinFromPriceGrid(e){let t=e.xSpacings[0],i=e.xSpacings[e.xSpacings.length-1];if(this.addModelMutation(new K(e.xVariable,t,i)),e.yVariable){let t=e.ySpacings[0],i=e.ySpacings[e.ySpacings.length-1];this.addModelMutation(new K(e.yVariable,t,i))}}isOptionVisible(e){let t=this.optionState.get(e);return!(t.isRemoved&&t.isRemoved())&&!t.isHidden()&&this.optionIsVisibleForCurrentAudience(e)}isOptionVisibleForReporting(e,t){if(this.optionIsRemoved(e))return!1;let i=this.optionState.get(e);return!i.hidden&&this.optionIsVisibleForAudience(e,t)}subProductConfigToLoad(){return this.subProductConfig}pricingConfigurationOverride(){return this.pricingConfigOverride}getBasePriceModifiers(){return this.basePriceModifiers}getOptionPriceModifiers(){return this.optionPriceModifiers}buildComponents(){let e=t=>{if(!this.isOptionVisibleForReporting(t.id,"QUOTE"))return[];switch(t.type){case"GROUP":return t.subOptions.flatMap(e);case"DISPLAY":return[];case"TEXT":case"SELECT_SINGLE":case"SELECT_MULTI":case"NUMERIC":case"MEASUREMENT":return[this.optionState.get(t.id).buildDisplayComponent()]}};return this.productConfig.options.flatMap(e)}buildOptionSnapshot(e){let t=this.optionState.get(e);if(t instanceof d)return t.snapshot();throw Error(`option: ${e} is not an input`)}buildSnapshot(){let e=[];for(let t of this.optionState.values())t instanceof d&&!t.isRemoved()&&e.push(t.snapshot());let t=[];for(let e of this.variableLookup.values())t.push({type:e.type,dataType:e.dataType,name:e.name,value:this.getVariableValue(e.name)});let i={meta:this.productConfig.meta,initialValues:this.initialValues,options:e,variables:t,subProducts:[]};return{meta:{engineVersion:"1.0.0",productConfigVersion:"1.0.1",id:this.productConfig.meta.id},products:[i]}}isOrderable(){let e=t=>{if("GROUP"==t.type)return!!this.optionState.get(t.id).isRemoved()||!this.optionIsVisibleForCurrentAudience(t.id)||t.subOptions.every(t=>e(t));let i=this.optionState.get(t.id);if(i instanceof d){if(i.isHidden()||!this.optionIsVisibleForCurrentAudience(t.id)||!i.isMandatory())return!0;if(!i.hasValue())return!1}return!0};if(this.messages.some(e=>"ERROR"==e.level))return!1;for(let t=0;t<this.productConfig.options.length;t++)if(!e(this.productConfig.options[t]))return!1;return!0}restoreOption(e){let t=this.optionState.get(e.id);if(!t)throw Error(`no option found for id ${e.id}, ${e.name}, ${e.type}, ${e.legacyId}`);t.restore(e)}optionIsVisibleForCurrentAudience(e){return this.optionIsVisibleForAudience(e,this.environment.audience)}optionIsVisibleForAudience(e,t){let i=this.optionLookup.get(e).audienceVisibility;return(null==i?!void 0:!i.hiddenFrom.includes(t))&&((null==i?!!void 0:!!i.visibleTo.includes(t))||(null==i?!void 0:!i.hiddenFrom.includes("ALL"))&&((null==i?!!void 0:!!i.visibleTo.includes("ALL"))||!1))}optionIsRemoved(e){if(this.optionState.get(e).isRemoved())return!0;let t=this.optionParentLookup.get(e);return null!=t&&this.optionIsRemoved(t)}restoreVariables(e){e.forEach(e=>{let t=this.variableLookup.get(e.name);t&&("SYSTEM"==t.type||"USER"==t.type)&&(t.value=e.value)})}}function $(e,t){let i=Math.sign(e),a=Math.pow(10,t);return Math.round(e*a)/a*i}let j={PRODUCT_HEIGHT:"PRODUCT_HEIGHT",PRODUCT_WIDTH:"PRODUCT_WIDTH",WINDOW_WIDTH:"WINDOW_WIDTH",WINDOW_HEIGHT:"WINDOW_HEIGHT"};class J{constructor(e,t,i=!1,a){this.environment=e,this.productBundle=t,this.subEngine=i,this.currentSubEngine=null,this.engineId=u.getNext();let n=null!=a?a:t.meta.initialProductId,r=t.products.find(e=>e.meta.id==n);if(!r)throw Error(`product id: ${n} not found in bundle`);this.productConfiguration=r}initModel(e){if(this.currentModel=new q(this.productConfiguration,this.environment,e),this.productConfiguration.initModel){let e=new Q(this.productConfiguration,this.currentModel,this);this.productConfiguration.initModel(e)}}getExecutionContext(){return new Q(this.productConfiguration,this.currentModel,this)}getSubEngineExecutionContext(){var e;return null===(e=this.currentSubEngine)||void 0===e?void 0:e.getExecutionContext()}buildResults(){var e;let t=this.currentModel.subProductConfigToLoad(),i=this.execute(),n=this.currentModel.subProductConfigToLoad();if(null!=n){let i=JSON.stringify(t),r=JSON.stringify(n);if(this.currentSubEngine&&n.productId===(null===(e=this.currentSubEngine)||void 0===e?void 0:e.productConfiguration.meta.id)&&i==r){if(null!=n.variables){for(let e in n.variables){let t=n.variables[e];null!=t&&!isNaN(t)&&this.currentSubEngine.currentModel.setVariableValue(e,t)}this.currentSubEngine.buildResults()}}else{let e=null;if(this.currentSubEngine&&(e=this.currentSubEngine.publish()),this.currentSubEngine=this.createSubEngine(n.productId),e)try{this.currentSubEngine.restoreProduct(!0,e.meta,e.products[0],n.initialValues)}catch(e){console.error(e)}else this.currentSubEngine.init(n.initialValues);if(null!=n.optionValues)for(let e in n.optionValues)this.currentSubEngine.currentModel.addOptionMutation(e,new O([n.optionValues[e]])),this.currentSubEngine.currentModel.addOptionMutation(e,new a);if(null!=n.variables){for(let e in n.variables)this.currentSubEngine.currentModel.setVariableValue(e,n.variables[e]);this.currentSubEngine.buildResults()}}}else this.currentSubEngine=null;if(!this.currentSubEngine)return i;let r=this.currentSubEngine.buildResults();return i.messages.push(...r.messages),Object.assign(Object.assign({},i),{availableFields:[...i.availableFields,...r.availableFields],isOrderable:i.isOrderable&&r.isOrderable})}onFieldUpdate(e){var t;return this.currentModel.hasField(e.id)?this.setFieldValueOnState(e):null===(t=this.currentSubEngine)||void 0===t||t.onFieldUpdate(e),this.buildResults()}init(e){return this.initModel(e),this.execute()}execute(){var e,t;this.executeRules();let i=[];this.productConfiguration.options.forEach(e=>{let t=this.buildFields(e,this.currentModel);i.push(...t)});let a=this.getPricingCalculator().calculate().totalPrice;a=isNaN(a)?0:a;let n=this.currentModel.buildComponents(),r=this.currentModel.isOrderable();if(this.productBundle.products.length>1&&this.currentModel.getProductId()==this.productBundle.meta.id&&null==this.currentSubEngine&&(r=!1),this.currentSubEngine){let i=this.currentSubEngine.execute();n=[...n,...null!==(t=null===(e=i.productConfiguration[0])||void 0===e?void 0:e.components)&&void 0!==t?t:[]];let s=i.productConfiguration[0].pricing.extendedSellPriceExTax;a+=isNaN(s)?0:s,r=r&&this.currentSubEngine.currentModel.isOrderable()}let s={productConfiguration:[{id:this.productConfiguration.meta.id,partNumber:this.productConfiguration.meta.id,name:this.productConfiguration.meta.name,description:this.productConfiguration.meta.description,notes:null,components:n,pricing:{unitSellPriceExTax:this.toMoney(a),unitSellPriceIncTax:this.toMoney(1.1*a),extendedSellPriceExTax:this.toMoney(a),extendedSellPriceIncTax:this.toMoney(1.1*a)}}],availableFields:i,isOrderable:r,messages:this.currentModel.getMessages()};return this.transformResult?this.transformResult(s):s}toMoney(e){return null===e?NaN:parseFloat($(e,2).toFixed(2))}executeRules(){let e=new Q(this.productConfiguration,this.currentModel,this);this.currentModel.resetForEvaluation(),this.productConfiguration.initModel&&this.productConfiguration.initModel(e),this.productConfiguration.rules.forEach(t=>{this.executeRule(e,t)})}executeRule(e,t){t.evaluateConditions(e)?t.actionOnTrue(e):t.actionOnFalse&&t.actionOnFalse(e)}setFieldValueOnState(t){var i,a,n,r,s;switch(t.type){case e.SELECT_SINGLE:this.currentModel.setSingleSelectFieldValue(t.id,null!==(a=null===(i=t.selectedOption)||void 0===i?void 0:i.id)&&void 0!==a?a:null);break;case e.SELECT_MULTI:this.currentModel.setMultiSelectFieldValue(t.id,t.selectedOptions.map(e=>e.id));break;case e.MEASUREMENT:case e.CURRENCY:case e.QUANTITY:this.currentModel.setNumericFieldValue(t.id,null!==(n=t.value)&&void 0!==n?n:0);break;case e.BOOLEAN:this.currentModel.setBooleanFieldValue(t.id,null!==(r=t.value)&&void 0!==r&&r);break;case e.TEXT:this.currentModel.setTextFieldValue(t.id,null!==(s=t.value)&&void 0!==s?s:"");break;default:throw Error(`Unknown field type ${t.type}`)}}buildFields(t,i){if("GROUP"===t.type){if(!i.isOptionVisible(t.id))return[];let a=[];return(t.subOptions.forEach(e=>{let t=this.buildFields(e,i);a.push(...t)}),0==a.length)?[]:[{id:t.id,type:e.GROUP,name:t.name,sortOrder:t.sortOrder,fields:a,meta:t.meta,messages:null}]}{let e=i.renderOption(t.id);return e?[e]:[]}}publish(){let e=this.currentModel.buildSnapshot();if(!this.currentSubEngine)return e;let t=this.currentSubEngine.publish();return e.products[0].subProducts=t.products,e}restore(e,t){let i=e.products.find(e=>e.meta.id===this.productConfiguration.meta.id);return this.restoreProduct(!1,e.meta,i,t),{evaluationResult:this.buildResults(),messages:[]}}restoreProduct(e,t,i,a){var n;let r=this.migrateProductSnapshot(t,i);for(let t of(this.initModel(a),r.options))try{this.currentModel.restoreOption(t)}catch(t){if(!e)throw t}this.currentModel.restoreVariables(r.variables),(null===(n=i.subProducts)||void 0===n?void 0:n.length)==1&&this.buildResults();let s=this.currentModel.subProductConfigToLoad();null!==s&&(this.currentSubEngine=this.createSubEngine(s.productId),this.currentSubEngine.restoreProduct(!1,t,i.subProducts.find(e=>e.meta.id===s.productId),a))}migrateProductSnapshot(e,t){if("1.0.1"==e.productConfigVersion)return t;let i=t.variables.find(e=>e.name==j.PRODUCT_WIDTH);i&&(i.name=j.WINDOW_WIDTH);let a=t.variables.find(e=>e.name==j.PRODUCT_HEIGHT);return a&&(a.name=j.WINDOW_HEIGHT),t}order(e){throw Error("Method not implemented.")}}class X{constructor(e,t,i,a,n){this.totalPrice=e,this.totalDiscount=t,this.basePrice=i,this.optionPrice=a,this.additionalComponents=n}}class z{constructor(e,t){this.productConfig=e,this.state=t}calculate(){let e=this.calculateBasePrice(),t=this.applyBasePriceModifiers(e)+this.calculateOptionPrice();return new X(t,0,t,0,[])}calculateOptionPrice(){let e=this.state.getOptionPriceModifiers(),t=0;for(let i=0;i<e.length;i++){let a=e[i];"FLAT"==a.type&&(t+=a.value)}return t}applyBasePriceModifiers(e){let t=this.state.getBasePriceModifiers();if(0==t.length)return e;let i=e,a=t.filter(e=>"CURRENCY"==e.type);for(let e=0;e<a.length;e++)i+=a[e].value;let n=t.filter(e=>"FACTOR"==e.type);for(let e=0;e<n.length;e++)i*=n[e].value;return i}calculateBasePrice(){let e=this.productConfig.pricing,t=this.state.pricingConfigurationOverride();null!=t&&(e=t);let i=e.mode;switch(i.type){case"FREE":case"FLAT":break;case"PRICE_GRID":let a=this.state.getPriceGridById(i.priceGridId);if(null==a)throw Error(`Price grid not found: ${i.priceGridId}`);return this.evaluatePriceGrid(a);case"SQUARE_DIMENSIONS":let n=i.category,r=null;switch(n){case"MAJOR":r="SQUARE_MAJOR";break;case"MINOR":r="SQUARE_MINOR"}let s=this.state.getValueByCalculationKey(r)*i.rate;switch(i.rounding.type){case"NONE":return s;case"FLOOR":return Math.floor(s);case"CEILING":return Math.ceil(s);case"HALF_UP":return $(s,i.rounding.decimals)}}return NaN}evaluatePriceGrid(e){let t=this.state.getVariableValue(e.xVariable),i=0;if(null!=e.yVariable){let t=this.state.getVariableValue(e.yVariable);for(let a=0;a<e.ySpacings.length;a++)if(t<=e.ySpacings[a]){i=a;break}}let a=0;for(let i=0;i<e.xSpacings.length;i++)if(t<=e.xSpacings[i]){a=i;break}return e.values[i][a]}}class Z{constructor(e,t=!1){this.productAttributes=e,this.readonlyWidth=t,this.widthFieldId=u.getNext(),this.heightFieldId=u.getNext()}render(e){let t=[];if(this.productAttributes.hasWidth){let i=e.getNumericVariable(j.WINDOW_WIDTH),a=new w(this.widthFieldId).setSortOrder(1).setName("Width").setMeta("dimensions--width").setMinimum(i.minimum).setMaximum(i.maximum).setReadonly(this.readonlyWidth).setCurrentValue(e.getVariableValue(j.WINDOW_WIDTH));t.push(a.render())}if(this.productAttributes.hasHeight){let i=e.getNumericVariable(j.WINDOW_HEIGHT),a=new w(this.heightFieldId).setSortOrder(2).setName("Height").setMeta("dimensions--height").setMinimum(i.minimum).setMaximum(i.maximum).setCurrentValue(e.getVariableValue(j.WINDOW_HEIGHT));t.push(a.render())}if(1==t.length)return t[0];let i=new p("DIMENSIONS",t);return i.setMeta("dimensions"),i.render()}isDimensionField(e){return e==this.widthFieldId||e==this.heightFieldId}setValue(e,t){if(e.id==this.widthFieldId)t.setVariableValue(j.WINDOW_WIDTH,e.value);else if(e.id==this.heightFieldId)t.setVariableValue(j.WINDOW_HEIGHT,e.value);else throw Error("Unknown field id: "+e.id)}hasValues(e){let t=!0;return this.productAttributes.hasHeight&&(t=e.getVariableValue(j.WINDOW_HEIGHT)>0),this.productAttributes.hasWidth&&(t=t&&e.getVariableValue(j.WINDOW_WIDTH)>0),t}getDimensionText(e){let t=[];if(this.productAttributes.hasWidth){let i=e.getVariableValue(j.WINDOW_WIDTH);i>0&&t.push(i.toFixed(0)+"mm")}if(this.productAttributes.hasHeight){let i=e.getVariableValue(j.WINDOW_HEIGHT);i>0&&t.push(i.toFixed(0)+"mm")}return t.join(" x ")}}class ee extends J{constructor(e,t,i=!1,a){super(e,t,i,a),this.productDimensionsState=null,(this.productConfiguration.meta.attributes.hasHeight||this.productConfiguration.meta.attributes.hasWidth)&&(this.productDimensionsState=new Z(this.productConfiguration.meta.attributes))}createSubEngine(e){return new ee(this.environment,this.productBundle,!0,e)}getPricingCalculator(){return new z(this.productConfiguration,this.currentModel)}initialValueSchema(){var e;return null!==(e=this.productConfiguration.initialValues)&&void 0!==e?e:[]}onFieldUpdate(e){return this.productDimensionsState&&this.productDimensionsState.isDimensionField(e.id)?(this.productDimensionsState.setValue(e,this.currentModel),super.execute()):super.onFieldUpdate(e)}handleFabricColourField(e){return"GROUP"==e.type?Object.assign(Object.assign({},e),{fields:e.fields.map(e=>this.handleFabricColourField(e))}):("SELECT_SINGLE"==e.type&&"fabric-color"==e.meta&&(e.meta="fabric-color--blockout"),e)}transformResult(e){var t;if(!this.productDimensionsState)return e;let i=[];if("PRIMARY"==this.currentModel.getValueByCalculationKey("MOUNT_POSITION")){i.push(this.productDimensionsState.render(this.currentModel));let a=e.productConfiguration[0];a&&(null===(t=a.components)||void 0===t||t.unshift({sortOrder:-1,name:"Dimensions",value:this.productDimensionsState.getDimensionText(this.currentModel)}))}return e.availableFields=i.concat(e.availableFields).map(e=>this.convertMeasurementGroups(e)),e.isOrderable=e.isOrderable&&this.productDimensionsState.hasValues(this.currentModel),e}convertMeasurementGroups(t){if("GROUP"!=t.type)return t;if(t.fields.every(e=>"MEASUREMENT"==e.type)){let i=t.fields;return Object.assign(Object.assign({},t),{type:e.SET,fields:i,messages:[]})}let i=this;return Object.assign(Object.assign({},t),{fields:t.fields.map(e=>i.convertMeasurementGroups(e))})}}let et=new ee({apiUrl:"",apiToken:"",audience:"ECOMMERCE_FRONTEND"},{meta:{id:"67003",name:"Pure Wood (50mm)",description:"",lastUpdated:"2025-07-09T12:56:52",initialProductId:"67003"},products:[{meta:{id:"67003",name:"Pure Wood (50mm)",description:"",lastUpdated:"2025-07-09T12:56:52",attributes:{hasWidth:!0,hasHeight:!0,hasQuantity:!0,optionSyncPassthrough:!1,measurementSystem:"METRIC"}},pricing:{mode:{type:"PRICE_GRID",priceGridId:"67003"}},options:[{legacyId:"2010185",id:"79ceba8e-b4ff-4184-9668-973f329117e6",name:"TYPE",sortOrder:0,type:"SELECT_SINGLE",meta:"fabric",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8731351",id:"57b78638-7962-48c7-9e66-f19a76bc1545",sortOrder:0,name:"Pure Wood (50mm) - Urban",manufacturerKey:"Pure Wood (50mm) - Urban",hasQuantity:!1,meta:"fabric-blinds--purewood-urban"},{legacyId:"8790216",id:"75507400-80a7-48ec-a59f-e3d024810790",sortOrder:1,name:"Pure Wood (50mm) - Pastel",manufacturerKey:"Pure Wood (50mm) - Pastel",hasQuantity:!1,meta:"fabric-blinds--purewood-pastel"},{legacyId:"8790217",id:"b445f5df-35ea-4217-b8c6-cf63719015b2",sortOrder:2,name:"Pure Wood (50mm) - Shadow",manufacturerKey:"Pure Wood (50mm) - Shadow",hasQuantity:!1,meta:"fabric-blinds--purewood-shadow"}],defaultId:null,calculationKey:"TYPE",manufacturerKey:"TYPE",required:!1},{legacyId:"1984380",id:"b31851c3-407e-4be4-9fc2-3301118ccfa6",name:"Colour",sortOrder:1,type:"SELECT_SINGLE",meta:"fabric-color",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8635264",id:"3e9d4413-c6e5-484c-8cff-54df37e84efc",sortOrder:0,name:"Pastel Aspen",manufacturerKey:"PASTEL ASPEN",hasQuantity:!1,meta:"fabric-blinds--purewood-pastel--aspen"},{legacyId:"8635265",id:"81a3e97e-8b48-4954-9f01-f03f5071d3cf",sortOrder:1,name:"Pastel Beech",manufacturerKey:"PASTEL BEECH",hasQuantity:!1,meta:"fabric-blinds--purewood-pastel--beech"},{legacyId:"8635266",id:"4dbc9131-effa-47b6-84bf-f03d7912f4ab",sortOrder:2,name:"Shadow Ebony",manufacturerKey:"SHADOW EBONY",hasQuantity:!1,meta:"fabric-blinds--purewood-shadow--ebony"},{legacyId:"8731571",id:"9ca3d500-0df3-455b-abe1-ff93656e5f98",sortOrder:3,name:"Urban Aspen",manufacturerKey:"URBAN ASPEN",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--aspen"},{legacyId:"8635267",id:"1997a77a-cb51-4884-ab8c-60fd78c10af8",sortOrder:4,name:"Urban Beech",manufacturerKey:"URBAN BEECH",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--beech"},{legacyId:"8635268",id:"426a059e-af62-4082-8748-3b0903e7782c",sortOrder:5,name:"Urban Birch",manufacturerKey:"URBAN BIRCH",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--birch"},{legacyId:"8635270",id:"ed639aad-8506-48a4-8a0c-9c8ed265f71c",sortOrder:6,name:"Urban Chestnut",manufacturerKey:"URBAN CHESTNUT",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--chestnut"},{legacyId:"8731570",id:"fd319e57-6f77-4872-af0a-21b78f0a13a7",sortOrder:7,name:"Urban Jatoba",manufacturerKey:"URBAN JATOBA",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--jatoba"},{legacyId:"8635269",id:"7e70447b-0fb7-4261-863c-e050113ae6ec",sortOrder:8,name:"Urban Oak",manufacturerKey:"URBAN OAK",hasQuantity:!1,meta:"fabric-blinds--purewood-urban--oak"}],defaultId:null,calculationKey:"Colour",manufacturerKey:"Colour",required:!0},{legacyId:"1984489",id:"cc3ec31d-116f-482c-aadb-6b0aaf175452",name:"Control Type",sortOrder:3,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635589",id:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",sortOrder:0,name:"Cord operated",manufacturerKey:"Cord operated",hasQuantity:!1,meta:null},{legacyId:"8635590",id:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",sortOrder:1,name:"Motor",manufacturerKey:"Motor",hasQuantity:!1,meta:null}],defaultId:"56c8d3ee-7b37-4647-94b9-74a3cb0a3667",calculationKey:"Control Type",manufacturerKey:"Control Type",required:!0},{legacyId:"1984490",id:"88ca3ed9-8398-453d-bf8f-9b40334b0dc4",name:"Motor Options",sortOrder:4,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1984491",id:"47d40836-3dee-4434-afbb-325f5c0ddd18",name:"Remote",sortOrder:5,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635591",id:"1373b42f-b146-4f57-afe3-56c9ac332cbb",sortOrder:100,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8635592",id:"403b6524-14b8-4ae9-9d52-7259938af161",sortOrder:100,name:"Situo 1 Variation RTS Pure White",manufacturerKey:"Situo 1 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8635593",id:"5b6b6554-f089-43ca-b720-74d9716b9097",sortOrder:100,name:"Situo 1 Variation RTS Silver",manufacturerKey:"Situo 1 Variation RTS Silver",hasQuantity:!1,meta:null},{legacyId:"8635594",id:"a8388155-2ab3-4193-bcf3-91a42bc608c5",sortOrder:100,name:"Situo 5 Variation RTS Pure White",manufacturerKey:"Situo 5 Variation RTS Pure White",hasQuantity:!1,meta:null},{legacyId:"8635595",id:"b6c473f3-831a-42d2-a169-1749a5a041ed",sortOrder:100,name:"Situo 5 Variation RTS Silver",manufacturerKey:"Situo 5 Variation RTS Silver",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Remote",manufacturerKey:"Remote",required:!1}]},{legacyId:"1984483",id:"d2858d92-02e6-44c9-a566-89bb8a4b9061",name:"Control Side",sortOrder:6,type:"SELECT_SINGLE",meta:"control-side",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8635575",id:"cfd2b77b-ff39-4abb-a074-6e54c6c15bd6",sortOrder:0,name:"Left",manufacturerKey:"L",hasQuantity:!1,meta:"control-side--left"},{legacyId:"8635576",id:"1412eefb-a55b-4d7a-85ab-9c861dbdf03d",sortOrder:1,name:"Right",manufacturerKey:"R",hasQuantity:!1,meta:"control-side--right"}],defaultId:null,calculationKey:"Cont Side",manufacturerKey:"Cont Side",required:!0},{legacyId:"1984484",id:"f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",name:"Fitting",sortOrder:7,type:"SELECT_SINGLE",meta:"fitting-type",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8635580",id:"dbaad81c-9c61-427e-bf37-dcd278c54f63",sortOrder:0,name:"Face Fit",manufacturerKey:"Face",hasQuantity:!1,meta:"fitting-type--face"},{legacyId:"8635581",id:"a2ded64a-f8a3-4e05-8398-578a43953791",sortOrder:1,name:"Recess Fit",manufacturerKey:"Recess",hasQuantity:!1,meta:"fitting-type--recess"}],defaultId:null,calculationKey:"Fixing",manufacturerKey:"Fixing",required:!0},{legacyId:"1984485",id:"13c962a8-7a63-4a9a-b0f8-47359edd05a1",name:"Hold Down Clips",sortOrder:8,type:"SELECT_SINGLE",meta:"hold-down-clips",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8635582",id:"719034c8-f124-4b38-8a9e-91cc5447b50f",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"hold-down-clips--yes"},{legacyId:"8635583",id:"39a1860a-96ad-4c6d-80eb-cd0ae95e2bea",sortOrder:1,name:"No",manufacturerKey:"N/A",hasQuantity:!1,meta:"hold-down-clips--no"}],defaultId:null,calculationKey:"Hold Down Clips",manufacturerKey:"Hold Down Clips",required:!0},{legacyId:"1984486",id:"33e57150-690f-42d1-a722-d46e6fb9c3b1",name:"Privacy Slats",sortOrder:9,type:"SELECT_SINGLE",meta:"slats",audienceVisibility:{visibleTo:["ALL"],hiddenFrom:[]},selects:[{legacyId:"8635584",id:"292806b6-6d46-4aef-8e9f-001dba541806",sortOrder:0,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:"slats--privacy"},{legacyId:"8635585",id:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:"slats--corded"}],defaultId:"deabaf48-815a-44c2-8ae6-636f7d2ebd25",calculationKey:"No Holes",manufacturerKey:"No Holes",required:!0},{legacyId:"1984487",id:"6c58b799-c876-4936-9ef9-addbbb54cae0",name:"No Holes Options",sortOrder:10,type:"GROUP",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},subOptions:[{legacyId:"1984488",id:"eb41a4a8-05e5-4e60-9dc6-2a3fbdd0443e",name:"Ladder Tape",sortOrder:11,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635586",id:"e69076ed-8351-49a6-9cfb-1c58e83607b4",sortOrder:100,name:"White",manufacturerKey:"White",hasQuantity:!1,meta:null},{legacyId:"8635587",id:"790cc317-f011-4903-9c50-82d3b7c203c2",sortOrder:100,name:"Cream",manufacturerKey:"Cream",hasQuantity:!1,meta:null},{legacyId:"8635588",id:"dd472555-0bff-4c0e-95c8-57da09d8bb96",sortOrder:100,name:"Mid Brown",manufacturerKey:"Mid Brown",hasQuantity:!1,meta:null}],defaultId:null,calculationKey:"Ladder Tape",manufacturerKey:"Ladder Tape",required:!1}]},{legacyId:"1984493",id:"f3985881-1150-4343-a425-e4b20986573d",name:"Woven Tape",sortOrder:12,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635597",id:"1b5bcd7e-d2ab-4c89-a1a0-b2d8c0a04839",sortOrder:0,name:"16mm Woven Tape",manufacturerKey:"16mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8635598",id:"490a9be6-d37b-43b0-bf19-b378765bd4ed",sortOrder:1,name:"25mm Woven Tape",manufacturerKey:"25mm woven tape",hasQuantity:!1,meta:null},{legacyId:"8728978",id:"3388a086-3bda-4678-8254-42069980a51c",sortOrder:2,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null}],defaultId:"490a9be6-d37b-43b0-bf19-b378765bd4ed",calculationKey:"Woven tape",manufacturerKey:"Woven tape",required:!1},{legacyId:"1984482",id:"f625bcde-8533-472c-ae0b-ae9bec5c3396",name:"Control Length",sortOrder:13,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635566",id:"3ef57438-78f1-4800-8b71-1b24f06bbf30",sortOrder:100,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null},{legacyId:"8635567",id:"5b59fb62-6dee-46fc-980c-87d1fa58baa7",sortOrder:100,name:"500mm",manufacturerKey:"500",hasQuantity:!1,meta:null},{legacyId:"8635568",id:"a9f34433-dd24-4595-a699-18c68e620ecd",sortOrder:100,name:"750mm",manufacturerKey:"750",hasQuantity:!1,meta:null},{legacyId:"8635569",id:"ea14eb90-250d-4d2d-b710-1132c2765af7",sortOrder:100,name:"1000mm",manufacturerKey:"1000",hasQuantity:!1,meta:null},{legacyId:"8635570",id:"cbc255a8-abc3-47ba-a580-cc0e465b2fa9",sortOrder:100,name:"1250mm",manufacturerKey:"1250",hasQuantity:!1,meta:null},{legacyId:"8635571",id:"7b705562-6c23-41f3-9a7c-99e78894fd7d",sortOrder:100,name:"1500mm",manufacturerKey:"1500",hasQuantity:!1,meta:null},{legacyId:"8635572",id:"788f91db-e7d8-43d6-9e44-3301a37c42df",sortOrder:100,name:"1750mm",manufacturerKey:"1750",hasQuantity:!1,meta:null},{legacyId:"8635573",id:"7357f69d-f240-4788-ba61-337f7c2f4df4",sortOrder:100,name:"2000mm",manufacturerKey:"2000",hasQuantity:!1,meta:null},{legacyId:"8635574",id:"c01fb4b1-fc2c-4b80-b970-0eff576121af",sortOrder:100,name:"2250mm",manufacturerKey:"2250",hasQuantity:!1,meta:null}],defaultId:"3ef57438-78f1-4800-8b71-1b24f06bbf30",calculationKey:"Control Length",manufacturerKey:"Control Length",required:!0},{legacyId:"1984492",id:"5b642efb-dbb4-4338-b7d3-dc03fa887cb2",name:"Fascia",sortOrder:14,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635596",id:"6134d18e-dc5a-4b60-bc08-168df75f2301",sortOrder:0,name:"STD",manufacturerKey:"STD",hasQuantity:!1,meta:null}],defaultId:"6134d18e-dc5a-4b60-bc08-168df75f2301",calculationKey:"Fascia",manufacturerKey:"Fascia",required:!0},{legacyId:"1984494",id:"6e76e530-19b7-42b5-a8c1-3c26d251082a",name:"Acorn",sortOrder:15,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635599",id:"75e088f2-b1c2-4f90-b475-b75b84019e86",sortOrder:0,name:"Chrome",manufacturerKey:"Chrome",hasQuantity:!1,meta:null},{legacyId:"8635600",id:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",sortOrder:1,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8635601",id:"ac452f38-77b0-4945-941e-7c0e79fc3738",sortOrder:2,name:"Timber",manufacturerKey:"Timber",hasQuantity:!1,meta:null}],defaultId:"74abc25b-4c88-4ff1-95a2-ac7644fc10d5",calculationKey:"Acorn",manufacturerKey:"Acorn",required:!1},{legacyId:"1984495",id:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",name:"Cut Outs",sortOrder:16,type:"SELECT_SINGLE",meta:null,audienceVisibility:{visibleTo:["ALL"],hiddenFrom:["CONFIGURATOR","ECOMMERCE_FRONTEND"]},selects:[{legacyId:"8635602",id:"915389bf-dc88-45ba-8767-9386a7ad2a2f",sortOrder:0,name:"N/A",manufacturerKey:"N/A",hasQuantity:!1,meta:null},{legacyId:"8635603",id:"3f46446d-5e47-4d4a-b68e-778ce668adf8",sortOrder:1,name:"Yes",manufacturerKey:"Yes",hasQuantity:!1,meta:null}],defaultId:"915389bf-dc88-45ba-8767-9386a7ad2a2f",calculationKey:"Cut-out",manufacturerKey:"Cut-out",required:!1}],initialValues:[{type:"MEASUREMENT",key:"WINDOW_WIDTH",unit:"MM",minimum:0,maximum:null,step:1},{type:"MEASUREMENT",key:"WINDOW_HEIGHT",unit:"MM",minimum:0,maximum:null,step:1}],initModel(e){e.setVariableValue("PRODUCT_WIDTH",e.getVariableByName("WINDOW_WIDTH")),e.setVariableValue("PRODUCT_HEIGHT",e.getVariableByName("WINDOW_HEIGHT")),180>e.getVariableByName("WINDOW_HEIGHT")&&150>e.getVariableByName("WINDOW_WIDTH")&&e.anyOptionSelected("b31851c3-407e-4be4-9fc2-3301118ccfa6",["4dbc9131-effa-47b6-84bf-f03d7912f4ab","3e9d4413-c6e5-484c-8cff-54df37e84efc","81a3e97e-8b48-4954-9f01-f03f5071d3cf","9ca3d500-0df3-455b-abe1-ff93656e5f98","1997a77a-cb51-4884-ab8c-60fd78c10af8","426a059e-af62-4082-8748-3b0903e7782c","ed639aad-8506-48a4-8a0c-9c8ed265f71c","fd319e57-6f77-4872-af0a-21b78f0a13a7","7e70447b-0fb7-4261-863c-e050113ae6ec"])&&e.addOptionMessage("b31851c3-407e-4be4-9fc2-3301118ccfa6","ERROR","Minimum size requirement not met for Colour Pastel Aspen, Pastel Beech, Shadow Ebony, Urban Aspen, Urban Beech, Urban Birch, Urban Chestnut, Urban Jatoba, Urban Oak"),e.hideOption("33e57150-690f-42d1-a722-d46e6fb9c3b1"),e.removeOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.removeOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.hideOption("6c58b799-c876-4936-9ef9-addbbb54cae0"),e.hideOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4"),e.setOptionReadOnly("f3985881-1150-4343-a425-e4b20986573d",!1)},rules:[{id:"32bcc3a2-4e46-4cc4-b1b9-43c3cb4e3cdb",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"],!0),actionOnTrue(e){e.showOption("6c58b799-c876-4936-9ef9-addbbb54cae0")}},{id:"acbaeb3c-be12-4034-ad53-ab01e539fac7",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"],!0),actionOnTrue(e){e.showOption("88ca3ed9-8398-453d-bf8f-9b40334b0dc4")}},{id:"2269555",name:"",evaluateConditions:e=>e.anyOptionSelected("79ceba8e-b4ff-4184-9668-973f329117e6",["75507400-80a7-48ec-a59f-e3d024810790"]),actionOnTrue(e){e.hideSelectFieldOption("b31851c3-407e-4be4-9fc2-3301118ccfa6",["4dbc9131-effa-47b6-84bf-f03d7912f4ab","9ca3d500-0df3-455b-abe1-ff93656e5f98","1997a77a-cb51-4884-ab8c-60fd78c10af8","426a059e-af62-4082-8748-3b0903e7782c","ed639aad-8506-48a4-8a0c-9c8ed265f71c","fd319e57-6f77-4872-af0a-21b78f0a13a7","7e70447b-0fb7-4261-863c-e050113ae6ec"])}},{id:"2269561",name:"",evaluateConditions:e=>e.anyOptionSelected("79ceba8e-b4ff-4184-9668-973f329117e6",["b445f5df-35ea-4217-b8c6-cf63719015b2"]),actionOnTrue(e){e.hideSelectFieldOption("b31851c3-407e-4be4-9fc2-3301118ccfa6",["3e9d4413-c6e5-484c-8cff-54df37e84efc","81a3e97e-8b48-4954-9f01-f03f5071d3cf","9ca3d500-0df3-455b-abe1-ff93656e5f98","1997a77a-cb51-4884-ab8c-60fd78c10af8","426a059e-af62-4082-8748-3b0903e7782c","ed639aad-8506-48a4-8a0c-9c8ed265f71c","fd319e57-6f77-4872-af0a-21b78f0a13a7","7e70447b-0fb7-4261-863c-e050113ae6ec"])}},{id:"2269562",name:"",evaluateConditions:e=>e.anyOptionSelected("79ceba8e-b4ff-4184-9668-973f329117e6",["57b78638-7962-48c7-9e66-f19a76bc1545"]),actionOnTrue(e){e.hideSelectFieldOption("b31851c3-407e-4be4-9fc2-3301118ccfa6",["3e9d4413-c6e5-484c-8cff-54df37e84efc","81a3e97e-8b48-4954-9f01-f03f5071d3cf","4dbc9131-effa-47b6-84bf-f03d7912f4ab","9ca3d500-0df3-455b-abe1-ff93656e5f98","1997a77a-cb51-4884-ab8c-60fd78c10af8"])}},{id:"2346464",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.hideOption("f3985881-1150-4343-a425-e4b20986573d")}},{id:"2346465",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"])}},{id:"2346466",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["deabaf48-815a-44c2-8ae6-636f7d2ebd25"]),actionOnTrue(e){e.selectOptionForceSelect("f3985881-1150-4343-a425-e4b20986573d",["3388a086-3bda-4678-8254-42069980a51c"])}},{id:"2346467",name:"",evaluateConditions:e=>e.anyOptionSelected("f13eeef7-d920-44c6-a7e3-3bfa7ec45c76",["a2ded64a-f8a3-4e05-8398-578a43953791"]),actionOnTrue(e){e.addMessage("INFO","Headrail to be same size as slats")}},{id:"629122a8-81c0-47fb-8283-bfeeaabc8af4",name:"",evaluateConditions:e=>e.anyOptionSelected("cc3ec31d-116f-482c-aadb-6b0aaf175452",["2ccf98e6-aafc-4de2-9dc9-f8f147255979"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"cc3ec31d-116f-482c-aadb-6b0aaf175452",selectId:"2ccf98e6-aafc-4de2-9dc9-f8f147255979",value:330})}},{id:"664eaeb1-d4e0-4795-8642-f1c99705ecef",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["403b6524-14b8-4ae9-9d52-7259938af161"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"403b6524-14b8-4ae9-9d52-7259938af161",value:110})}},{id:"2bf9cf94-015f-4dff-a952-c673e3b1ab54",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["5b6b6554-f089-43ca-b720-74d9716b9097"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"5b6b6554-f089-43ca-b720-74d9716b9097",value:110})}},{id:"c832c73a-a15e-4038-b742-e454e6089c84",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["a8388155-2ab3-4193-bcf3-91a42bc608c5"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"a8388155-2ab3-4193-bcf3-91a42bc608c5",value:142})}},{id:"3b2b6ae7-fbcf-4fa0-a59c-9a51f6603735",name:"",evaluateConditions:e=>e.anyOptionSelected("47d40836-3dee-4434-afbb-325f5c0ddd18",["b6c473f3-831a-42d2-a169-1749a5a041ed"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"47d40836-3dee-4434-afbb-325f5c0ddd18",selectId:"b6c473f3-831a-42d2-a169-1749a5a041ed",value:142})}},{id:"8019786d-f524-4951-8e61-cbd213f61dd6",name:"",evaluateConditions:e=>e.anyOptionSelected("33e57150-690f-42d1-a722-d46e6fb9c3b1",["292806b6-6d46-4aef-8e9f-001dba541806"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.1})}},{id:"d65ea8b0-5266-4f10-a931-639dba1ce383",name:"",evaluateConditions:e=>e.anyOptionSelected("f3985881-1150-4343-a425-e4b20986573d",["490a9be6-d37b-43b0-bf19-b378765bd4ed"]),actionOnTrue(e){e.addBasePriceModifier({type:"FACTOR",value:1.15})}},{id:"61013a40-2001-4f77-b946-e3eb147f5e69",name:"",evaluateConditions:e=>e.anyOptionSelected("6e76e530-19b7-42b5-a8c1-3c26d251082a",["75e088f2-b1c2-4f90-b475-b75b84019e86"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"6e76e530-19b7-42b5-a8c1-3c26d251082a",selectId:"75e088f2-b1c2-4f90-b475-b75b84019e86",value:20})}},{id:"a6dca2ba-9a86-47bc-b790-51704806250c",name:"",evaluateConditions:e=>e.anyOptionSelected("d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",["3f46446d-5e47-4d4a-b68e-778ce668adf8"]),actionOnTrue(e){e.addOptionPriceModifier({type:"FLAT",optionId:"d29b5d0c-1ecf-49fe-8b35-0ea4d741cb3a",selectId:"3f46446d-5e47-4d4a-b68e-778ce668adf8",value:15})}}],variables:[{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_HEIGHT",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"WINDOW_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"NUMERIC",name:"PRODUCT_WIDTH",minimum:1,maximum:null,step:null,value:null},{type:"SYSTEM",dataType:"ENUM",name:"MOUNT_POSITION",values:["PRIMARY","SECONDARY"],value:"PRIMARY"},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MAJOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")/1e6},{type:"COMPUTED",dataType:"ANY",name:"SQUARE_MINOR",calculate:e=>e.getVariableByName("PRODUCT_WIDTH")*e.getVariableByName("PRODUCT_HEIGHT")},{type:"COMPUTED",dataType:"ANY",name:"CUT_WIDTH",calculate:e=>e.getValueByCalculationKey("PRODUCT_WIDTH")-8},{type:"COMPUTED",dataType:"ANY",name:"CUT_DROP",calculate:e=>e.getValueByCalculationKey("PRODUCT_HEIGHT")-8}],priceGrids:[{id:"67003",xVariable:"WINDOW_WIDTH",xSpacings:[600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400,2500,2600],yVariable:"WINDOW_HEIGHT",ySpacings:[600,700,800,900,1e3,1100,1200,1300,1400,1500,1600,1700,1800,1900,2e3,2100,2200,2300,2400,2500,2600],values:[[231,239,252,262,270,281,292,303,313,324,334,347,357,367,375,386,397,408,420,430,439],[236,247,257,269,280,290,300,314,323,336,346,362,371,381,393,404,412,428,438,451,462],[240,254,263,277,288,298,311,323,335,347,358,374,385,397,406,421,431,444,457,469,483],[246,258,268,285,295,307,319,334,345,358,371,387,400,410,423,436,449,463,476,488,501],[253,263,276,291,303,316,328,343,356,371,382,401,412,427,437,453,465,480,493,508,521],[257,268,282,297,312,324,338,353,367,382,396,414,428,439,454,468,482,498,512,525,540],[261,274,289,306,318,332,347,364,376,395,407,428,440,455,468,485,498,515,530,545,560],[265,281,294,313,326,341,357,373,387,405,420,440,455,469,485,501,515,534,548,565,580],[269,286,300,319,335,349,367,383,399,417,432,454,469,485,500,517,534,551,568,583,599],[274,291,307,326,342,358,375,394,408,429,445,467,484,500,515,534,548,569,586,603,621],[281,297,314,335,351,368,385,404,421,440,458,483,498,515,531,551,559,588,606,625,643],[287,303,321,341,358,375,396,414,432,453,469,494,512,529,547,568,585,605,625,644,663],[291,308,326,348,367,384,404,424,441,464,483,509,525,544,563,583,601,624,643,662,682],[295,314,334,356,374,394,412,434,454,476,494,521,541,559,577,599,617,641,661,682,702],[299,319,339,364,382,402,423,444,464,487,507,536,555,574,594,615,634,659,680,700,721],[304,325,346,370,392,409,432,455,474,498,519,547,569,589,608,631,652,677,698,720,741],[309,330,351,376,398,420,440,464,486,510,531,562,582,603,625,648,668,695,716,738,760],[316,338,359,385,407,430,453,477,498,524,546,577,599,622,643,667,689,715,738,761,null],[321,343,366,394,415,437,462,486,509,537,558,591,613,634,658,683,705,732,757,781,null],[325,349,372,400,423,448,470,495,519,547,571,604,627,650,674,699,723,750,775,null,null],[330,354,377,406,431,455,480,507,530,559,583,616,641,665,689,715,739,768,794,null,null]]}]}]}),ei={init:()=>et.init(),onFieldUpdate:e=>et.onFieldUpdate(e),order:e=>et.order(e),publish:()=>et.publish(),restore:e=>et.restore(e),initialValueSchema:()=>et.initialValueSchema()};export{ei as default};
//# sourceMappingURL=bundle.js.map